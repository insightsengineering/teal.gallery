<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="teal.gallery">
<title>Sample Apps Source Code â€¢ teal.gallery</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sample Apps Source Code">
<meta property="og:description" content="teal.gallery">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="../consent.css">
<script src="../consent.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">teal.gallery</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/sources.html">Sample Apps Source Code</a>
    <a class="dropdown-item" href="../articles/teal.gallery.html">Getting Started with teal.gallery</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/insightsengineering/teal.gallery">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Sample Apps Source Code</h1>
                        <h4 data-toc-skip class="author">NEST CoreDev
Team</h4>
            
            <h4 data-toc-skip class="date">2023-02-08</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/teal.gallery/blob/HEAD/vignettes/sources.Rmd" class="external-link"><code>vignettes/sources.Rmd</code></a></small>
      <div class="d-none name"><code>sources.Rmd</code></div>
    </div>

    
    
<style type="text/css">
pre {
  max-height: 800px;
  overflow-y: auto;
}

pre[class] {
  max-height: 400px;
}
</style>
<p>The sample apps serve as a starting template for your specific
<code>teal</code> app.</p>
<p>Please always use the sample apps as a starting point for your
applications, as we keep updating the NEST packages without necessarily
backwards compatible releases.</p>
<p>You need to save the source code in a file <code>app.R</code> to
begin developing your <code>teal</code> application.</p>
<div class="section level2">
<h2 id="sample-app-source-code">Sample app source code<a class="anchor" aria-label="anchor" href="#sample-app-source-code"></a>
</h2>
<p>Source code for all available sample apps in this gallery is
available below.</p>
<div class="section level3">
<h3 id="basic-teal">basic-teal<a class="anchor" aria-label="anchor" href="#basic-teal"></a>
</h3>
<p>Deployed app: <a href="https://shinyapps.io/NEST/main/basic-teal" class="external-link uri">https://shinyapps.io/NEST/main/basic-teal</a></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">teal</span><span class="op">)</span></span>
<span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal/man/init.html" class="external-link">init</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/teal_data.html" class="external-link">teal_data</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/dataset.html" class="external-link">dataset</a></span><span class="op">(</span><span class="st">"IRIS"</span>, <span class="va">iris</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/dataset.html" class="external-link">dataset</a></span><span class="op">(</span><span class="st">"MTCARS"</span>, <span class="va">mtcars</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal/man/modules.html" class="external-link">modules</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal/man/example_module.html" class="external-link">example_module</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  header <span class="op">=</span> <span class="st">"My first teal application"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="early-dev">early-dev<a class="anchor" aria-label="anchor" href="#early-dev"></a>
</h3>
<p>Deployed app: <a href="https://shinyapps.io/NEST/main/early-dev" class="external-link uri">https://shinyapps.io/NEST/main/early-dev</a></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">scda</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">scda.2022</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/teal.modules.clinical" class="external-link">teal.modules.clinical</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">teal.modules.general</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/teal.osprey/" class="external-link">teal.osprey</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/nestcolor/" class="external-link">nestcolor</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">sparkline</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>shiny.useragg <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ADSL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adsl</span></span>
<span></span>
<span><span class="co"># derive ADSL treatment duration</span></span>
<span><span class="va">adsl_labels</span> <span class="op">&lt;-</span> <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADSL</span>, fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">ADSL</span> <span class="op">&lt;-</span> <span class="va">ADSL</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    TRTDURD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">TRTEDTM</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">TRTSDTM</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span>,</span>
<span>    DTHFL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">DTHDT</span><span class="op">)</span>, <span class="st">"Y"</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>    EOSSTT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">EOSSTT</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"COMPLETED"</span>, <span class="st">"ONGOING"</span>, <span class="st">"DISCONTINUED"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_relabel.html" class="external-link">var_relabel</a></span><span class="op">(</span></span>
<span>    TRTDURD <span class="op">=</span> <span class="st">"Treatment Duration in Days"</span>,</span>
<span>    DTHFL <span class="op">=</span> <span class="st">"Death Flag"</span>,</span>
<span>    DCSREAS <span class="op">=</span> <span class="st">"Reason for Study Discontinuation"</span>,</span>
<span>    EOSSTT <span class="op">=</span> <span class="st">"End of Study Status"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/droplevels.html" class="external-link">droplevels</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">adsl_labels</span><span class="op">)</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">adsl_labels</span></span>
<span></span>
<span><span class="va">ADAE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adae</span></span>
<span></span>
<span><span class="co"># derive common flags for AEs</span></span>
<span><span class="va">adae_labels</span> <span class="op">&lt;-</span> <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADAE</span>, fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">ADAE</span> <span class="op">&lt;-</span> <span class="va">ADAE</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html" class="external-link">mutate_at</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AESOC"</span>, <span class="st">"AEBODSYS"</span>, <span class="st">"AEHLT"</span>, <span class="st">"AEDECOD"</span>, <span class="st">"AETERM"</span>, <span class="st">"AELLT"</span><span class="op">)</span>, <span class="va">as.character</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    RELFL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">AEREL</span> <span class="op">==</span> <span class="st">"Y"</span>, <span class="st">"Y"</span>, <span class="st">"N"</span><span class="op">)</span>,</span>
<span>    CTC35FL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">AETOXGR</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"3"</span>, <span class="st">"4"</span>, <span class="st">"5"</span><span class="op">)</span>, <span class="st">"Y"</span>, <span class="st">"N"</span><span class="op">)</span>,</span>
<span>    SERFL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">AESER</span> <span class="op">==</span> <span class="st">"Y"</span>, <span class="st">"Y"</span>, <span class="st">"N"</span><span class="op">)</span>,</span>
<span>    RELSERFL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">AEREL</span> <span class="op">==</span> <span class="st">"Y"</span> <span class="op">&amp;</span> <span class="va">AESER</span> <span class="op">==</span> <span class="st">"Y"</span>, <span class="st">"Y"</span>, <span class="st">"N"</span><span class="op">)</span>,</span>
<span>    AEREL1 <span class="op">=</span> <span class="op">(</span><span class="va">AEREL</span> <span class="op">==</span> <span class="st">"Y"</span> <span class="op">&amp;</span> <span class="va">ACTARM</span> <span class="op">==</span> <span class="st">"A: Drug X"</span><span class="op">)</span>,</span>
<span>    AEREL2 <span class="op">=</span> <span class="op">(</span><span class="va">AEREL</span> <span class="op">==</span> <span class="st">"Y"</span> <span class="op">&amp;</span> <span class="va">ACTARM</span> <span class="op">==</span> <span class="st">"B: Placebo"</span><span class="op">)</span>,</span>
<span>    ASTDT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">ASTDTM</span><span class="op">)</span>,</span>
<span>    AENDT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">AENDTM</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_relabel.html" class="external-link">var_relabel</a></span><span class="op">(</span></span>
<span>    RELFL <span class="op">=</span> <span class="st">"Related AE"</span>,</span>
<span>    CTC35FL <span class="op">=</span> <span class="st">"Grade &gt;=3 AE"</span>,</span>
<span>    SERFL <span class="op">=</span> <span class="st">"Serious AE"</span>,</span>
<span>    RELSERFL <span class="op">=</span> <span class="st">"Related Serious AE"</span>,</span>
<span>    AEREL1 <span class="op">=</span> <span class="st">"AE related to A: Drug X"</span>,</span>
<span>    AEREL2 <span class="op">=</span> <span class="st">"AE related to B: Placebo"</span>,</span>
<span>    ASTDT <span class="op">=</span> <span class="st">"Analysis Start Date"</span>,</span>
<span>    AENDT <span class="op">=</span> <span class="st">"Analysis End Date"</span>,</span>
<span>    AESOC <span class="op">=</span> <span class="st">"Primary System Organ Class"</span>,</span>
<span>    AEBODSYS <span class="op">=</span> <span class="st">"Body System or Organ Class"</span>,</span>
<span>    AEHLT <span class="op">=</span> <span class="st">"High Level Term"</span>,</span>
<span>    AEDECOD <span class="op">=</span> <span class="st">"Dictionary-Derived Term"</span>,</span>
<span>    AETERM <span class="op">=</span> <span class="st">"Reported Term for the Adverse Event"</span>,</span>
<span>    AELLT <span class="op">=</span> <span class="st">"Lowest Level Term"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">ADCM</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adcm</span></span>
<span></span>
<span><span class="co"># process ADCM</span></span>
<span><span class="va">ADCM</span> <span class="op">&lt;-</span> <span class="va">ADCM</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    ASTDT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">ASTDTM</span><span class="op">)</span>,</span>
<span>    AENDT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">AENDTM</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_relabel.html" class="external-link">var_relabel</a></span><span class="op">(</span></span>
<span>    ASTDT <span class="op">=</span> <span class="st">"Analysis Start Date"</span>,</span>
<span>    AENDT <span class="op">=</span> <span class="st">"Analysis End Date"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">ADEX</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adex</span></span>
<span></span>
<span><span class="co"># process ADEX</span></span>
<span><span class="va">ADEX</span> <span class="op">&lt;-</span> <span class="va">ADEX</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    ASTDT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">ASTDTM</span><span class="op">)</span>,</span>
<span>    AENDT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">AENDTM</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_relabel.html" class="external-link">var_relabel</a></span><span class="op">(</span></span>
<span>    ASTDT <span class="op">=</span> <span class="st">"Analysis Start Date"</span>,</span>
<span>    AENDT <span class="op">=</span> <span class="st">"Analysis End Date"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">ADTR</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adtr</span></span>
<span></span>
<span><span class="co"># process ADTR</span></span>
<span><span class="va">adtr_labels</span> <span class="op">&lt;-</span> <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADTR</span>, fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">ADTR</span> <span class="op">&lt;-</span> <span class="va">ADTR</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    PCHG <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">AVISIT</span> <span class="op">==</span> <span class="st">"BASELINE"</span>, <span class="fl">0</span>, <span class="va">PCHG</span><span class="op">)</span>,</span>
<span>    CHG <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">AVISIT</span> <span class="op">==</span> <span class="st">"BASELINE"</span>, <span class="fl">0</span>, <span class="va">CHG</span><span class="op">)</span>,</span>
<span>    AVAL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">AVISIT</span> <span class="op">==</span> <span class="st">"BASELINE"</span>, <span class="va">BASE</span>, <span class="va">AVAL</span><span class="op">)</span>,</span>
<span>    AVALC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">AVISIT</span> <span class="op">==</span> <span class="st">"BASELINE"</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">BASE</span><span class="op">)</span>, <span class="va">AVALC</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">AVISIT</span> <span class="op">!=</span> <span class="st">"SCREENING"</span><span class="op">)</span></span>
<span><span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADTR</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">adtr_labels</span></span>
<span></span>
<span><span class="va">ADTRWF</span> <span class="op">&lt;-</span> <span class="va">ADTR</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">AVISIT</span> <span class="op">!=</span> <span class="st">"BASELINE"</span><span class="op">)</span></span>
<span><span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADTRWF</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADTR</span>, fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># process ADRS</span></span>
<span><span class="va">ADRSSWIM</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adrs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">PARAMCD</span> <span class="op">==</span> <span class="st">"OVRINV"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ADRS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adrs</span></span>
<span><span class="va">adrs_labels</span> <span class="op">&lt;-</span> <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADRS</span>, fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">ADRS</span> <span class="op">&lt;-</span> <span class="va">ADRS</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">PARAMCD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BESRSPI"</span>, <span class="st">"INVET"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>ADT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">ADTM</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/droplevels.html" class="external-link">droplevels</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADRS</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">adrs_labels</span>, <span class="st">"Analysis Date"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ADLB</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adlb</span></span>
<span></span>
<span><span class="co"># process ADLB</span></span>
<span><span class="va">ADLB</span> <span class="op">&lt;-</span> <span class="va">ADLB</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    ADT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">ADTM</span><span class="op">)</span>,</span>
<span>    LBSTRESN <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">LBSTRESC</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_relabel.html" class="external-link">var_relabel</a></span><span class="op">(</span></span>
<span>    ADT <span class="op">=</span> <span class="st">"Analysis Date"</span>,</span>
<span>    LBSTRESN <span class="op">=</span> <span class="st">"Numeric Result/Finding in Standard Units"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co">## Reusable Configuration For Modules</span></span>
<span><span class="va">arm_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARMCD"</span>, <span class="st">"ARM"</span>, <span class="st">"ACTARMCD"</span>, <span class="st">"ACTARM"</span>, <span class="st">"EOSSTT"</span><span class="op">)</span></span>
<span><span class="va">aeflag_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RELFL"</span>, <span class="st">"CTC35FL"</span>, <span class="st">"SERFL"</span>, <span class="st">"RELSERFL"</span><span class="op">)</span></span>
<span><span class="va">facet_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEX"</span>, <span class="st">"BMRKR2"</span>, <span class="st">"RACE"</span>, <span class="st">"STRATA1"</span>, <span class="st">"STRATA2"</span><span class="op">)</span></span>
<span><span class="va">ds_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EOSSTT"</span>, <span class="st">"DCSREAS"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_arm_var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, subset <span class="op">=</span> <span class="va">arm_vars</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"ARM"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_aeflag_var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, subset <span class="op">=</span> <span class="va">aeflag_vars</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_aeterm_var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AEDECOD"</span>, <span class="st">"AETERM"</span>, <span class="st">"AELLT"</span>, <span class="st">"AESOC"</span>, <span class="st">"AEBODSYS"</span>, <span class="st">"AEHLT"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"AEDECOD"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_facet_var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, subset <span class="op">=</span> <span class="va">facet_vars</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_ds_var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">ds_vars</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="va">ds_vars</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_bar_var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TRTDURD"</span>, <span class="st">"EOSDY"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"TRTDURD"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_paramcd_rsp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADRS</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span>, subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BESRSPI"</span>, <span class="st">"INVET"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"BESRSPI"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_paramcd_tr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADTR</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span>, subset <span class="op">=</span> <span class="st">"SLDINV"</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"SLDINV"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">adsl_labels</span> <span class="op">&lt;-</span> <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span></span>
<span><span class="va">fact_vars_asl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Filter</a></span><span class="op">(</span><span class="va">isTRUE</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">is.factor</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">date_vars_asl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Date"</span>, <span class="st">"POSIXct"</span>, <span class="st">"POSIXlt"</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">demog_vars_asl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span><span class="op">[</span><span class="op">!</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span>, <span class="va">date_vars_asl</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co">## Create front page for app ----</span></span>
<span><span class="va">srv_front_page</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">datasets</span>, <span class="va">dataname</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">show_teal_setup_code</span>, <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/showModal.html" class="external-link">showModal</a></span><span class="op">(</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/modalDialog.html" class="external-link">modalDialog</a></span><span class="op">(</span></span>
<span>        title <span class="op">=</span> <span class="st">"R Code Used to Setup the Current Teal Shiny App"</span>,</span>
<span>        <span class="va">tags</span><span class="op">$</span><span class="fu">div</span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/actionButton.html" class="external-link">actionButton</a></span><span class="op">(</span><span class="st">"copyRCode"</span>, <span class="st">"Copy to Clipboard"</span>, `data-clipboard-target` <span class="op">=</span> <span class="st">"#r_code"</span><span class="op">)</span>,</span>
<span>          style <span class="op">=</span> <span class="st">"padding-bottom: 15px;"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        <span class="va">tags</span><span class="op">$</span><span class="fu">div</span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">pre</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"r_code"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">"app.R"</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        footer <span class="op">=</span> <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/tagList.html" class="external-link">tagList</a></span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/actionButton.html" class="external-link">actionButton</a></span><span class="op">(</span><span class="st">"copyRCode"</span>, <span class="st">"Copy to Clipboard"</span>, `data-clipboard-target` <span class="op">=</span> <span class="st">"#r_code"</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/modalDialog.html" class="external-link">modalButton</a></span><span class="op">(</span><span class="st">"Dismiss"</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        size <span class="op">=</span> <span class="st">"l"</span>,</span>
<span>        easyClose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>      <span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">ui_front_page</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/tagList.html" class="external-link">tagList</a></span><span class="op">(</span></span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span></span>
<span>      <span class="st">"The"</span>, <span class="va">tags</span><span class="op">$</span><span class="fu">code</span><span class="op">(</span><span class="st">"ADSL"</span><span class="op">)</span>, <span class="st">","</span>, <span class="va">tags</span><span class="op">$</span><span class="fu">code</span><span class="op">(</span><span class="st">"ADAE"</span><span class="op">)</span>, <span class="st">","</span>, <span class="va">tags</span><span class="op">$</span><span class="fu">code</span><span class="op">(</span><span class="st">"ADRS"</span><span class="op">)</span>, <span class="st">", and "</span>,</span>
<span>      <span class="va">tags</span><span class="op">$</span><span class="fu">code</span><span class="op">(</span><span class="st">"ADTR"</span><span class="op">)</span>, <span class="st">"data in this example app has been created using random number generators."</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span><span class="st">""</span>, style <span class="op">=</span> <span class="st">"height: 20px;"</span><span class="op">)</span>,</span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span></span>
<span>      <span class="st">"This sample app mainly covers "</span>, <span class="va">tags</span><span class="op">$</span><span class="fu">code</span><span class="op">(</span><span class="st">"teal.osprey"</span><span class="op">)</span>, <span class="st">" modules."</span>,</span>
<span>      <span class="st">"If additional safety and efficacy modules are needed,"</span>,</span>
<span>      <span class="st">"please refer to the safety and efficacy sample app templates"</span>,</span>
<span>      <span class="st">"to add additional modules."</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span><span class="st">""</span>, style <span class="op">=</span> <span class="st">"height: 15px;"</span><span class="op">)</span>,</span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>      <span class="st">"These apps are relatively easily setup for a study."</span>,</span>
<span>      <span class="st">"That is, the teal framework is optimized to setup one"</span>,</span>
<span>      <span class="st">"Shiny App per analysis purpose. For example, the code to setup"</span>,</span>
<span>      <span class="st">"the current teal app can be requested with the following button:"</span></span>
<span>    <span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span><span class="st">""</span>, style <span class="op">=</span> <span class="st">"height: 15px;"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/actionButton.html" class="external-link">actionButton</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"show_teal_setup_code"</span><span class="op">)</span>, <span class="st">"Show Teal Shiny App Setup R-Code"</span>, icon <span class="op">=</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/icon.html" class="external-link">icon</a></span><span class="op">(</span><span class="st">"fas fa-align-justify"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span><span class="st">""</span>, style <span class="op">=</span> <span class="st">"height: 20px;"</span><span class="op">)</span>,</span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">div</span><span class="op">(</span></span>
<span>      <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span></span>
<span>        <span class="st">"This is shiny app was brought to you by ED SPA. For more information please contact NEST SME team."</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># create cdisc_dataset objects to pass into app</span></span>
<span></span>
<span><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>  x <span class="op">=</span> <span class="va">ADSL</span>,</span>
<span>  code <span class="op">=</span> <span class="st">'ADSL &lt;- synthetic_cdisc_data("latest")$adsl</span></span>
<span><span class="st">          adsl_labels &lt;- formatters::var_labels(ADSL, fill = FALSE)</span></span>
<span><span class="st">          ADSL &lt;- ADSL %&gt;%</span></span>
<span><span class="st">              mutate(</span></span>
<span><span class="st">                TRTDURD = as.numeric(as.Date(TRTEDTM) - as.Date(TRTSDTM)) + 1,</span></span>
<span><span class="st">                DTHFL = ifelse(!is.na(DTHDT), "Y", NA),</span></span>
<span><span class="st">                EOSSTT = factor(EOSSTT, levels = c("COMPLETED", "ONGOING", "DISCONTINUED"))</span></span>
<span><span class="st">              ) %&gt;%</span></span>
<span><span class="st">              formatters::var_relabel(</span></span>
<span><span class="st">                TRTDURD = "Treatment Duration in Days",</span></span>
<span><span class="st">                DTHFL = "Death Flag",</span></span>
<span><span class="st">                DCSREAS = "Reason for Study Discontinuation",</span></span>
<span><span class="st">                EOSSTT = "End of Study Status"</span></span>
<span><span class="st">              ) %&gt;%</span></span>
<span><span class="st">              droplevels()</span></span>
<span><span class="st">          formatters::var_labels(ADSL)[c(names(adsl_labels))] &lt;- adsl_labels'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">adae</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>  x <span class="op">=</span> <span class="va">ADAE</span>,</span>
<span>  keys <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"STUDYID"</span>, <span class="st">"USUBJID"</span>, <span class="st">"AETERM"</span>, <span class="st">"AESEQ"</span><span class="op">)</span>,</span>
<span>  code <span class="op">=</span> <span class="st">'ADAE &lt;- synthetic_cdisc_data("latest")$adae</span></span>
<span><span class="st">          # derive common flags for AEs</span></span>
<span><span class="st">          ADAE &lt;- ADAE %&gt;%</span></span>
<span><span class="st">            mutate_at(</span></span>
<span><span class="st">              c("AESOC", "AEBODSYS", "AEHLT", "AEDECOD", "AETERM", "AELLT"),</span></span>
<span><span class="st">              as.character</span></span>
<span><span class="st">            ) %&gt;%</span></span>
<span><span class="st">            mutate(</span></span>
<span><span class="st">              RELFL = ifelse(AEREL == "Y", "Y", "N"),</span></span>
<span><span class="st">              CTC35FL = ifelse(AETOXGR %in% c("3", "4", "5"), "Y", "N"),</span></span>
<span><span class="st">              SERFL = ifelse(AESER == "Y", "Y", "N"),</span></span>
<span><span class="st">              RELSERFL = ifelse(AEREL == "Y" &amp; AESER == "Y", "Y", "N"),</span></span>
<span><span class="st">              AEREL1 = (AEREL == "Y" &amp; ACTARM == "A: Drug X"),</span></span>
<span><span class="st">              AEREL2 = (AEREL == "Y" &amp; ACTARM == "B: Placebo"),</span></span>
<span><span class="st">              ASTDT = as.Date(ASTDTM),</span></span>
<span><span class="st">              AENDT = as.Date(AENDTM)</span></span>
<span><span class="st">            ) %&gt;%</span></span>
<span><span class="st">            formatters::var_relabel(</span></span>
<span><span class="st">              RELFL = "Related AE",</span></span>
<span><span class="st">              CTC35FL = "Grade &gt;=3 AE",</span></span>
<span><span class="st">              SERFL = "Serious AE",</span></span>
<span><span class="st">              RELSERFL = "Related Serious AE",</span></span>
<span><span class="st">              AEREL1 = "AE related to A: Drug X",</span></span>
<span><span class="st">              AEREL2 = "AE related to B: Placebo",</span></span>
<span><span class="st">              ASTDT = "Analysis Start Date",</span></span>
<span><span class="st">              AENDT = "Analysis End Date",</span></span>
<span><span class="st">              AESOC = "Primary System Organ Class",</span></span>
<span><span class="st">              AEBODSYS = "Body System or Organ Class",</span></span>
<span><span class="st">              AEHLT = "High Level Term",</span></span>
<span><span class="st">              AEDECOD = "Dictionary-Derived Term",</span></span>
<span><span class="st">              AETERM = "Reported Term for the Adverse Event",</span></span>
<span><span class="st">              AELLT = "Lowest Level Term"</span></span>
<span><span class="st">            )'</span>,</span>
<span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ADSL <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">adcm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>  x <span class="op">=</span> <span class="va">ADCM</span>,</span>
<span>  code <span class="op">=</span> <span class="st">'ADCM &lt;- synthetic_cdisc_data("latest")$adcm</span></span>
<span><span class="st">          ADCM &lt;- ADCM %&gt;%</span></span>
<span><span class="st">            mutate(</span></span>
<span><span class="st">              ASTDT = as.Date(ASTDTM),</span></span>
<span><span class="st">              AENDT = as.Date(AENDTM)</span></span>
<span><span class="st">            ) %&gt;%</span></span>
<span><span class="st">            formatters::var_relabel(</span></span>
<span><span class="st">              ASTDT = "Analysis Start Date",</span></span>
<span><span class="st">              AENDT = "Analysis End Date"</span></span>
<span><span class="st">            )'</span>,</span>
<span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ADSL <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">adex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADEX"</span>,</span>
<span>  x <span class="op">=</span> <span class="va">ADEX</span>,</span>
<span>  code <span class="op">=</span> <span class="st">'ADEX &lt;- synthetic_cdisc_data("latest")$adex</span></span>
<span><span class="st">          ADEX &lt;- ADEX %&gt;%</span></span>
<span><span class="st">            mutate(</span></span>
<span><span class="st">              ASTDT = as.Date(ASTDTM),</span></span>
<span><span class="st">              AENDT = as.Date(AENDTM)</span></span>
<span><span class="st">            ) %&gt;%</span></span>
<span><span class="st">            formatters::var_relabel(</span></span>
<span><span class="st">              ASTDT = "Analysis Start Date",</span></span>
<span><span class="st">              AENDT = "Analysis End Date"</span></span>
<span><span class="st">            )'</span>,</span>
<span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ADSL <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">adtr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADTR"</span>,</span>
<span>  x <span class="op">=</span> <span class="va">ADTR</span>,</span>
<span>  keys <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"STUDYID"</span>, <span class="st">"USUBJID"</span>, <span class="st">"PARAMCD"</span>, <span class="st">"AVISIT"</span><span class="op">)</span>,</span>
<span>  code <span class="op">=</span> <span class="st">'ADTR &lt;- synthetic_cdisc_data("latest")$adtr</span></span>
<span><span class="st">          adtr_labels &lt;- formatters::var_labels(ADTR, fill = FALSE)</span></span>
<span><span class="st">          ADTR &lt;- ADTR %&gt;%</span></span>
<span><span class="st">            mutate(</span></span>
<span><span class="st">              PCHG = ifelse(AVISIT == "BASELINE", 0, PCHG),</span></span>
<span><span class="st">              CHG = ifelse(AVISIT == "BASELINE", 0, CHG),</span></span>
<span><span class="st">              AVAL = ifelse(AVISIT == "BASELINE", BASE, AVAL),</span></span>
<span><span class="st">              AVALC = ifelse(AVISIT == "BASELINE", as.character(BASE), AVALC)</span></span>
<span><span class="st">            ) %&gt;%</span></span>
<span><span class="st">            dplyr::filter(AVISIT != "SCREENING")</span></span>
<span><span class="st">          formatters::var_labels(ADTR) &lt;- adtr_labels'</span>,</span>
<span>  var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ADSL <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">adtrwf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADTRWF"</span>,</span>
<span>  x <span class="op">=</span> <span class="va">ADTRWF</span>,</span>
<span>  keys <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"STUDYID"</span>, <span class="st">"USUBJID"</span>, <span class="st">"PARAMCD"</span>, <span class="st">"AVISIT"</span><span class="op">)</span>,</span>
<span>  code <span class="op">=</span> <span class="st">'ADTRWF &lt;- ADTR %&gt;%</span></span>
<span><span class="st">            dplyr::filter(AVISIT != "BASELINE")</span></span>
<span><span class="st">          formatters::var_labels(ADTRWF) &lt;- formatters::var_labels(ADTR, fill = FALSE)'</span>,</span>
<span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ADTR <span class="op">=</span> <span class="va">adtr</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">adrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADRS"</span>,</span>
<span>  x <span class="op">=</span> <span class="va">ADRS</span>,</span>
<span>  code <span class="op">=</span> <span class="st">'ADRS &lt;- synthetic_cdisc_data("latest")$adrs</span></span>
<span><span class="st">          adrs_labels &lt;- formatters::var_labels(ADRS, fill = FALSE)</span></span>
<span><span class="st">          ADRS &lt;- ADRS %&gt;%</span></span>
<span><span class="st">            filter(PARAMCD %in% c("BESRSPI", "INVET"))  %&gt;%</span></span>
<span><span class="st">            mutate(ADT = as.Date(ADTM)) %&gt;%</span></span>
<span><span class="st">            droplevels()</span></span>
<span><span class="st">        formatters::var_labels(ADRS) &lt;- c(adrs_labels, "Analysis Date")'</span>,</span>
<span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ADSL <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">adrsswim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADRSSWIM"</span>,</span>
<span>  x <span class="op">=</span> <span class="va">ADRSSWIM</span>,</span>
<span>  keys <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"STUDYID"</span>, <span class="st">"USUBJID"</span>, <span class="st">"PARAMCD"</span>, <span class="st">"AVISIT"</span><span class="op">)</span>,</span>
<span>  code <span class="op">=</span> <span class="st">'ADRSSWIM &lt;- synthetic_cdisc_data("latest")$adrs %&gt;%</span></span>
<span><span class="st">            dplyr::filter(PARAMCD == "OVRINV") %&gt;%</span></span>
<span><span class="st">            arrange(USUBJID)'</span>,</span>
<span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ADSL <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">adlb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>  x <span class="op">=</span> <span class="va">ADLB</span>,</span>
<span>  code <span class="op">=</span> <span class="st">'ADLB &lt;- synthetic_cdisc_data("latest")$adlb</span></span>
<span><span class="st">          ADLB &lt;- ADLB %&gt;%</span></span>
<span><span class="st">            mutate(</span></span>
<span><span class="st">              ADT = as.Date(ADTM),</span></span>
<span><span class="st">              LBSTRESN = as.numeric(LBSTRESC)</span></span>
<span><span class="st">            ) %&gt;%</span></span>
<span><span class="st">            formatters::var_relabel(</span></span>
<span><span class="st">              ADT = "Analysis Date",</span></span>
<span><span class="st">              LBSTRESN = "Numeric Result/Finding in Standard Units"</span></span>
<span><span class="st">            )'</span>,</span>
<span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ADSL <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Setup App</span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu">teal</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/teal/man/init.html" class="external-link">init</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_data.html" class="external-link">cdisc_data</a></span><span class="op">(</span></span>
<span>    <span class="va">adsl</span>,</span>
<span>    <span class="va">adae</span>,</span>
<span>    <span class="va">adex</span>,</span>
<span>    <span class="va">adcm</span>,</span>
<span>    <span class="va">adtr</span>,</span>
<span>    <span class="va">adtrwf</span>,</span>
<span>    <span class="va">adrs</span>,</span>
<span>    <span class="va">adrsswim</span>,</span>
<span>    <span class="va">adlb</span>,</span>
<span>    check <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal/man/modules.html" class="external-link">modules</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal/man/module.html" class="external-link">module</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"App Information"</span>,</span>
<span>      server <span class="op">=</span> <span class="va">srv_front_page</span>,</span>
<span>      ui <span class="op">=</span> <span class="va">ui_front_page</span>,</span>
<span>      filters <span class="op">=</span> <span class="st">"all"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_data_table.html" class="external-link">tm_data_table</a></span><span class="op">(</span><span class="st">"Data Table"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_variable_browser.html" class="external-link">tm_variable_browser</a></span><span class="op">(</span><span class="st">"Variable Browser"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal/man/modules.html" class="external-link">modules</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Adverse Events"</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.osprey/man/tm_g_events_term_id.html" class="external-link">tm_g_events_term_id</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"Common AE Plot"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>        term_var <span class="op">=</span> <span class="va">cs_aeterm_var</span>,</span>
<span>        arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>        plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">800</span>, <span class="fl">200</span>, <span class="fl">2000</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.osprey/man/tm_g_ae_oview.html" class="external-link">tm_g_ae_oview</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"AE Overview Plot"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>        arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>        flag_var_anl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AEREL1"</span>, <span class="st">"AEREL2"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="cn">NULL</span></span>
<span>        <span class="op">)</span>,</span>
<span>        plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">800</span>, <span class="fl">200</span>, <span class="fl">2000</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.osprey/man/tm_g_butterfly.html" class="external-link">tm_g_butterfly</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"Butterfly Plot"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>        filter_var <span class="op">=</span> <span class="va">cs_aeflag_var</span>,</span>
<span>        right_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>        left_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>        category_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AEDECOD"</span>, <span class="st">"AETERM"</span>, <span class="st">"AESOC"</span>, <span class="st">"AEBODSYS"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"AEBODSYS"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        color_by_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="st">"AETOXGR"</span><span class="op">)</span>, <span class="st">"None"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"AETOXGR"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        count_by_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"# of patients"</span>, <span class="st">"# of AEs"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"# of patients"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        facet_var <span class="op">=</span> <span class="va">cs_facet_var</span>,</span>
<span>        sort_by_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span>choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count"</span>, <span class="st">"alphabetical"</span><span class="op">)</span>, selected <span class="op">=</span> <span class="st">"count"</span><span class="op">)</span>,</span>
<span>        legend_on <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600</span>, <span class="fl">200</span>, <span class="fl">2000</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.osprey/man/tm_g_ae_sub.html" class="external-link">tm_g_ae_sub</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"AE by Subgroup"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>        arm_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          selected <span class="op">=</span> <span class="st">"ACTARMCD"</span>,</span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ACTARM"</span>, <span class="st">"ACTARMCD"</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        group_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEX"</span>, <span class="st">"REGION1"</span>, <span class="st">"RACE"</span><span class="op">)</span>,</span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEX"</span>, <span class="st">"REGION1"</span>, <span class="st">"RACE"</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600</span>, <span class="fl">200</span>, <span class="fl">2000</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_summary.html" class="external-link">tm_t_summary</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Disposition Table"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>      arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>      summarize_vars <span class="op">=</span> <span class="va">cs_ds_var</span>,</span>
<span>      useNA <span class="op">=</span> <span class="st">"no"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.osprey/man/tm_g_spiderplot.html" class="external-link">tm_g_spiderplot</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Spider plot"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADTR"</span>,</span>
<span>      paramcd <span class="op">=</span> <span class="va">cs_paramcd_tr</span>,</span>
<span>      x_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span>choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADTR</span>, <span class="st">"ADY"</span><span class="op">)</span>, selected <span class="op">=</span> <span class="st">"ADY"</span><span class="op">)</span>,</span>
<span>      y_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADTR</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PCHG"</span>, <span class="st">"CHG"</span>, <span class="st">"AVAL"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"PCHG"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      marker_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEX"</span>, <span class="st">"RACE"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"SEX"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      line_colorby_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>      xfacet_var <span class="op">=</span> <span class="va">cs_facet_var</span>,</span>
<span>      yfacet_var <span class="op">=</span> <span class="va">cs_facet_var</span>,</span>
<span>      vref_line <span class="op">=</span> <span class="st">"42"</span>,</span>
<span>      href_line <span class="op">=</span> <span class="st">"-20, 0, 30"</span>,</span>
<span>      anno_txt_var <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>      legend_on <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>      plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600</span>, <span class="fl">200</span>, <span class="fl">2000</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.osprey/man/tm_g_swimlane.html" class="external-link">tm_g_swimlane</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Swimlane Plot"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADRSSWIM"</span>,</span>
<span>      bar_var <span class="op">=</span> <span class="va">cs_bar_var</span>,</span>
<span>      bar_color_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">fact_vars_asl</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"EOSSTT"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      sort_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">arm_vars</span>, <span class="st">"TRTDURD"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="va">arm_vars</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>      <span class="op">)</span>,</span>
<span>      marker_pos_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADRS</span>, <span class="st">"ADY"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"ADY"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      marker_shape_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADRS</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVALC"</span>, <span class="st">"AVISIT"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"AVALC"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      marker_shape_opt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CR"</span> <span class="op">=</span> <span class="fl">16</span>, <span class="st">"PR"</span> <span class="op">=</span> <span class="fl">17</span>, <span class="st">"SD"</span> <span class="op">=</span> <span class="fl">18</span>, <span class="st">"PD"</span> <span class="op">=</span> <span class="fl">15</span>, <span class="st">"Death"</span> <span class="op">=</span> <span class="fl">8</span><span class="op">)</span>,</span>
<span>      marker_color_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADRS</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVALC"</span>, <span class="st">"AVISIT"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"AVALC"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      marker_color_opt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>        <span class="st">"CR"</span> <span class="op">=</span> <span class="st">"green"</span>, <span class="st">"PR"</span> <span class="op">=</span> <span class="st">"blue"</span>, <span class="st">"SD"</span> <span class="op">=</span> <span class="st">"goldenrod"</span>,</span>
<span>        <span class="st">"PD"</span> <span class="op">=</span> <span class="st">"red"</span>, <span class="st">"Death"</span> <span class="op">=</span> <span class="st">"black"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      vref_line <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">60</span><span class="op">)</span>,</span>
<span>      anno_txt_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="fu"><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">intersect</a></span><span class="op">(</span><span class="va">arm_vars</span>, <span class="va">fact_vars_asl</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="va">arm_vars</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.osprey/man/tm_g_waterfall.html" class="external-link">tm_g_waterfall</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Waterfall Plot"</span>,</span>
<span>      dataname_tr <span class="op">=</span> <span class="st">"ADTRWF"</span>,</span>
<span>      dataname_rs <span class="op">=</span> <span class="st">"ADRS"</span>,</span>
<span>      bar_paramcd <span class="op">=</span> <span class="va">cs_paramcd_tr</span>,</span>
<span>      bar_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADTRWF</span>, <span class="st">"PCHG"</span><span class="op">)</span>, <span class="st">"PCHG"</span><span class="op">)</span>,</span>
<span>      bar_color_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">fact_vars_asl</span><span class="op">)</span>, <span class="st">"ARMCD"</span><span class="op">)</span>,</span>
<span>      sort_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">fact_vars_asl</span><span class="op">)</span>, <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>      add_label_var_sl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">fact_vars_asl</span><span class="op">)</span>, <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>      add_label_paramcd_rs <span class="op">=</span> <span class="va">cs_paramcd_rsp</span>,</span>
<span>      anno_txt_var_sl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">fact_vars_asl</span><span class="op">)</span>, <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>      anno_txt_paramcd_rs <span class="op">=</span> <span class="va">cs_paramcd_rsp</span>,</span>
<span>      facet_var <span class="op">=</span> <span class="va">cs_facet_var</span>,</span>
<span>      ytick_at <span class="op">=</span> <span class="fl">20</span>,</span>
<span>      href_line <span class="op">=</span> <span class="st">"-30, 20"</span>,</span>
<span>      gap_point_val <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1200L</span>, <span class="fl">400L</span>, <span class="fl">5000L</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.osprey/man/tm_g_patient_profile.html" class="external-link">tm_g_patient_profile</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Patient Profile Plot"</span>,</span>
<span>      patient_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">$</span><span class="va">USUBJID</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">$</span><span class="va">USUBJID</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>      <span class="op">)</span>,</span>
<span>      sl_dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>      ex_dataname <span class="op">=</span> <span class="st">"ADEX"</span>,</span>
<span>      ae_dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>      rs_dataname <span class="op">=</span> <span class="st">"ADRS"</span>,</span>
<span>      cm_dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>      lb_dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>      sl_start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        selected <span class="op">=</span> <span class="st">"TRTSDTM"</span>,</span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TRTSDTM"</span>, <span class="st">"RANDDT"</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      ex_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        selected <span class="op">=</span> <span class="st">"PARCAT2"</span>,</span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADEX</span>, <span class="st">"PARCAT2"</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      ae_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        selected <span class="op">=</span> <span class="st">"AEDECOD"</span>,</span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AEDECOD"</span>, <span class="st">"AESOC"</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      ae_line_col_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        selected <span class="op">=</span> <span class="st">"AESER"</span>,</span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AESER"</span>, <span class="st">"AEREL"</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      ae_line_col_opt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Y"</span> <span class="op">=</span> <span class="st">"red"</span>, <span class="st">"N"</span> <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span>,</span>
<span>      rs_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        selected <span class="op">=</span> <span class="st">"PARAMCD"</span>,</span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADRS</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      cm_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        selected <span class="op">=</span> <span class="st">"CMDECOD"</span>,</span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CMDECOD"</span>, <span class="st">"CMCAT"</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      lb_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        selected <span class="op">=</span> <span class="st">"PARAMCD"</span>,</span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      x_limit <span class="op">=</span> <span class="st">"-28, 750"</span>,</span>
<span>      plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1200</span>, <span class="fl">400</span>, <span class="fl">5000</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  header <span class="op">=</span> <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>    class <span class="op">=</span> <span class="st">""</span>,</span>
<span>    style <span class="op">=</span> <span class="st">"margin-bottom: 2px;"</span>,</span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">h1</span><span class="op">(</span><span class="st">"Demo ED Onco teal app with random ADaM data"</span>, <span class="va">tags</span><span class="op">$</span><span class="fu">span</span><span class="op">(</span><span class="st">"ED SPA"</span>, class <span class="op">=</span> <span class="st">"pull-right"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  footer <span class="op">=</span> <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span>class <span class="op">=</span> <span class="st">"text-muted"</span>, <span class="st">"Source: teal.gallery package"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Start Teal Shiny App ----</span></span>
<span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="efficacy">efficacy<a class="anchor" aria-label="anchor" href="#efficacy"></a>
</h3>
<p>Deployed app: <a href="https://shinyapps.io/NEST/main/efficacy" class="external-link uri">https://shinyapps.io/NEST/main/efficacy</a></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">scda</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">scda.2022</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">teal.modules.general</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/teal.modules.clinical" class="external-link">teal.modules.clinical</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/nestcolor/" class="external-link">nestcolor</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">sparkline</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>shiny.useragg <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># code&gt;</span></span>
<span><span class="co">## Generate Data</span></span>
<span><span class="va">ADSL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adsl</span></span>
<span><span class="va">adsl_labels</span> <span class="op">&lt;-</span> <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADSL</span>, fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">char_vars_asl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Filter</a></span><span class="op">(</span><span class="va">isTRUE</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">is.character</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">adsl_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="va">adsl_labels</span>,</span>
<span>  AGEGR1 <span class="op">=</span> <span class="st">"Age Group"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">ADSL</span> <span class="op">&lt;-</span> <span class="va">ADSL</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    AGEGR1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">AGE</span> <span class="op">&lt;</span> <span class="fl">45</span> <span class="op">~</span> <span class="st">"&lt;45"</span>,</span>
<span>      <span class="va">AGE</span> <span class="op">&gt;=</span> <span class="fl">45</span> <span class="op">~</span> <span class="st">"&gt;=45"</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html" class="external-link">mutate_at</a></span><span class="op">(</span><span class="va">char_vars_asl</span>, <span class="va">factor</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">adsl_labels</span></span>
<span></span>
<span><span class="va">ADTTE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adtte</span></span>
<span></span>
<span><span class="va">ADRS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adrs</span></span>
<span><span class="va">adrs_labels</span> <span class="op">&lt;-</span> <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADRS</span>, fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">ADRS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ADRS</span>, <span class="va">PARAMCD</span> <span class="op">==</span> <span class="st">"BESRSPI"</span> <span class="op">|</span> <span class="va">AVISIT</span> <span class="op">==</span> <span class="st">"FOLLOW UP"</span><span class="op">)</span></span>
<span><span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADRS</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">adrs_labels</span></span>
<span></span>
<span><span class="va">ADQS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adqs</span></span>
<span><span class="va">adqs_labels</span> <span class="op">&lt;-</span> <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADQS</span>, fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">ADQS</span> <span class="op">&lt;-</span> <span class="va">ADQS</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ABLFL</span> <span class="op">!=</span> <span class="st">"Y"</span> <span class="op">&amp;</span> <span class="va">ABLFL2</span> <span class="op">!=</span> <span class="st">"Y"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">AVISIT</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"WEEK 1 DAY 8"</span>, <span class="st">"WEEK 2 DAY 15"</span>, <span class="st">"WEEK 3 DAY 22"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    AVISIT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">AVISIT</span><span class="op">)</span>,</span>
<span>    AVISITN <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">AVISITN</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADQS</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">adqs_labels</span></span>
<span></span>
<span><span class="co"># &lt;code</span></span>
<span></span>
<span><span class="co">## Reusable Configuration For Modules</span></span>
<span><span class="va">arm_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARMCD"</span>, <span class="st">"ARM"</span><span class="op">)</span></span>
<span><span class="va">strata_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"STRATA1"</span>, <span class="st">"STRATA2"</span><span class="op">)</span></span>
<span><span class="va">facet_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGEGR1"</span>, <span class="st">"BMRKR2"</span>, <span class="st">"SEX"</span>, <span class="st">"COUNTRY"</span><span class="op">)</span></span>
<span><span class="va">cov_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGE"</span>, <span class="st">"SEX"</span>, <span class="st">"BMRKR1"</span>, <span class="st">"BMRKR2"</span>, <span class="st">"REGION1"</span><span class="op">)</span></span>
<span><span class="va">visit_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVISIT"</span>, <span class="st">"AVISITN"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_arm_var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, subset <span class="op">=</span> <span class="va">arm_vars</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"ARM"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_strata_var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, subset <span class="op">=</span> <span class="va">strata_vars</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"STRATA1"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_facet_var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, subset <span class="op">=</span> <span class="va">facet_vars</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"AGEGR1"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_cov_var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, subset <span class="op">=</span> <span class="va">cov_vars</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"AGE"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_paramcd_tte</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADTTE</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"OS"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_paramcd_rsp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADRS</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"BESRSPI"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_paramcd_qs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADQS</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"FKSI-FWB"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_visit_var_qs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADQS</span>, subset <span class="op">=</span> <span class="va">visit_vars</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"AVISIT"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">fact_vars_asl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Filter</a></span><span class="op">(</span><span class="va">isTRUE</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">is.factor</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">fact_vars_asl_orig</span> <span class="op">&lt;-</span> <span class="va">fact_vars_asl</span><span class="op">[</span><span class="op">!</span><span class="va">fact_vars_asl</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">char_vars_asl</span><span class="op">]</span></span>
<span></span>
<span><span class="va">date_vars_asl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Date"</span>, <span class="st">"POSIXct"</span>, <span class="st">"POSIXlt"</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">demog_vars_asl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span><span class="op">[</span><span class="op">!</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span>, <span class="va">date_vars_asl</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># reference &amp; comparison arm selection when switching the arm variable</span></span>
<span><span class="co"># ARMCD is given in a delayed fashion using value choices and</span></span>
<span><span class="co"># ARM is given with the ref and comp levels supplied explicitly</span></span>
<span><span class="va">arm_ref_comp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  ARMCD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    ref <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="st">"ADSL"</span>, var_choices <span class="op">=</span> <span class="st">"ARMCD"</span>, var_label <span class="op">=</span> <span class="st">"ARM"</span>, subset <span class="op">=</span> <span class="st">"ARM A"</span><span class="op">)</span>,</span>
<span>    comp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="st">"ADSL"</span>, var_choices <span class="op">=</span> <span class="st">"ARMCD"</span>, var_label <span class="op">=</span> <span class="st">"ARM"</span>, subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM B"</span>, <span class="st">"ARM C"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  ARM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ref <span class="op">=</span> <span class="st">"A: Drug X"</span>, comp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B: Placebo"</span>, <span class="st">"C: Combination"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Setup App</span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal/man/init.html" class="external-link">init</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_data.html" class="external-link">cdisc_data</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADSL"</span>, <span class="va">ADSL</span>,</span>
<span>      code <span class="op">=</span> <span class="st">'ADSL &lt;- synthetic_cdisc_data("latest")$adsl</span></span>
<span><span class="st">                                        adsl_labels &lt;- formatters::var_labels(ADSL, fill = FALSE)</span></span>
<span><span class="st">                                        adsl_labels &lt;- c(adsl_labels,</span></span>
<span><span class="st">                                          AGEGR1 = "Age Group"</span></span>
<span><span class="st">                                        )</span></span>
<span><span class="st">                                        ADSL &lt;- ADSL %&gt;% mutate(</span></span>
<span><span class="st">                                          AGEGR1 = factor(case_when(</span></span>
<span><span class="st">                                            AGE &lt; 45 ~ "&lt;45",</span></span>
<span><span class="st">                                            AGE &gt;= 45 ~ "&gt;=45"</span></span>
<span><span class="st">                                          ))</span></span>
<span><span class="st">                                        ) %&gt;%</span></span>
<span><span class="st">                                        mutate_at(char_vars_asl, factor)</span></span>
<span><span class="st">                                        formatters::var_labels(ADSL) &lt;- adsl_labels'</span>,</span>
<span>      vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>char_vars_asl <span class="op">=</span> <span class="va">char_vars_asl</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADRS"</span>, <span class="va">ADRS</span>, code <span class="op">=</span> <span class="st">'ADRS &lt;- synthetic_cdisc_data("latest")$adrs</span></span>
<span><span class="st">                                        adrs_labels &lt;- formatters::var_labels(ADRS, fill = FALSE)</span></span>
<span><span class="st">                                        ADRS &lt;- filter(ADRS, PARAMCD == "BESRSPI" | AVISIT == "FOLLOW UP")</span></span>
<span><span class="st">                                        formatters::var_labels(ADRS) &lt;- adrs_labels'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADTTE"</span>, <span class="va">ADTTE</span>, code <span class="op">=</span> <span class="st">"ADTTE &lt;- synthetic_cdisc_data(\"latest\")$adtte"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADQS"</span>, <span class="va">ADQS</span>, code <span class="op">=</span> <span class="st">'ADQS &lt;- synthetic_cdisc_data("latest")$adqs</span></span>
<span><span class="st">                                        adqs_labels &lt;- formatters::var_labels(ADQS, fill = FALSE)</span></span>
<span><span class="st">                                        ADQS &lt;- ADQS %&gt;%</span></span>
<span><span class="st">                                          filter(ABLFL != "Y" &amp; ABLFL2 != "Y") %&gt;%</span></span>
<span><span class="st">                                          filter(AVISIT %in% c("WEEK 1 DAY 8", "WEEK 2 DAY 15", "WEEK 3 DAY 22")) %&gt;%</span></span>
<span><span class="st">                                          mutate(</span></span>
<span><span class="st">                                            AVISIT = as.factor(AVISIT),</span></span>
<span><span class="st">                                            AVISITN = rank(AVISITN) %&gt;%</span></span>
<span><span class="st">                                              as.factor() %&gt;%</span></span>
<span><span class="st">                                              as.numeric() %&gt;%</span></span>
<span><span class="st">                                              as.factor()</span></span>
<span><span class="st">                                          )</span></span>
<span><span class="st">                                        formatters::var_labels(ADQS) &lt;- adqs_labels'</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal/man/modules.html" class="external-link">modules</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_front_page.html" class="external-link">tm_front_page</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Study Information"</span>,</span>
<span>      header_text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Info about data source"</span> <span class="op">=</span> <span class="st">"Random data are used that have been created with the 'scda' R package"</span><span class="op">)</span>,</span>
<span>      tables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>`NEST packages used` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Packages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"teal.modules.general"</span>, <span class="st">"teal.modules.clinical"</span>, <span class="st">"scda"</span>, <span class="st">"scda.2022"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_data_table.html" class="external-link">tm_data_table</a></span><span class="op">(</span><span class="st">"Data Table"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_variable_browser.html" class="external-link">tm_variable_browser</a></span><span class="op">(</span><span class="st">"Variable Browser"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_summary.html" class="external-link">tm_t_summary</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Demographic Table"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>      arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>      summarize_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">demog_vars_asl</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEX"</span>, <span class="st">"AGE"</span>, <span class="st">"RACE"</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal/man/modules.html" class="external-link">modules</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Forest Plots"</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_g_forest_tte.html" class="external-link">tm_g_forest_tte</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"Survival Forest Plot"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADTTE"</span>,</span>
<span>        arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>        strata_var <span class="op">=</span> <span class="va">cs_strata_var</span>,</span>
<span>        subgroup_var <span class="op">=</span> <span class="va">cs_facet_var</span>,</span>
<span>        paramcd <span class="op">=</span> <span class="va">cs_paramcd_tte</span>,</span>
<span>        plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">800L</span>, <span class="fl">200L</span>, <span class="fl">4000L</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_g_forest_rsp.html" class="external-link">tm_g_forest_rsp</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"Response Forest Plot"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADRS"</span>,</span>
<span>        arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>        strata_var <span class="op">=</span> <span class="va">cs_strata_var</span>,</span>
<span>        subgroup_var <span class="op">=</span> <span class="va">cs_facet_var</span>,</span>
<span>        paramcd <span class="op">=</span> <span class="va">cs_paramcd_rsp</span>,</span>
<span>        plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">800L</span>, <span class="fl">200L</span>, <span class="fl">4000L</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_g_km.html" class="external-link">tm_g_km</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Kaplan Meier Plot"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADTTE"</span>,</span>
<span>      arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>      arm_ref_comp <span class="op">=</span> <span class="va">arm_ref_comp</span>,</span>
<span>      paramcd <span class="op">=</span> <span class="va">cs_paramcd_tte</span>,</span>
<span>      facet_var <span class="op">=</span> <span class="va">cs_facet_var</span>,</span>
<span>      strata_var <span class="op">=</span> <span class="va">cs_strata_var</span>,</span>
<span>      plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1800L</span>, <span class="fl">200L</span>, <span class="fl">4000L</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_binary_outcome.html" class="external-link">tm_t_binary_outcome</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Response Table"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADRS"</span>,</span>
<span>      arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>      arm_ref_comp <span class="op">=</span> <span class="va">arm_ref_comp</span>,</span>
<span>      paramcd <span class="op">=</span> <span class="va">cs_paramcd_rsp</span>,</span>
<span>      strata_var <span class="op">=</span> <span class="va">cs_strata_var</span>,</span>
<span>      rsp_table <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_tte.html" class="external-link">tm_t_tte</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Time To Event Table"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADTTE"</span>,</span>
<span>      arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>      paramcd <span class="op">=</span> <span class="va">cs_paramcd_tte</span>,</span>
<span>      strata_var <span class="op">=</span> <span class="va">cs_strata_var</span>,</span>
<span>      time_points <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">182</span>, <span class="fl">365</span>, <span class="fl">547</span><span class="op">)</span>, <span class="fl">182</span><span class="op">)</span>,</span>
<span>      event_desc_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="st">"ADTTE"</span>, <span class="st">"EVNTDESC"</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"EVNTDESC"</span>,</span>
<span>        fixed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_t_crosstable.html" class="external-link">tm_t_crosstable</a></span><span class="op">(</span></span>
<span>      <span class="st">"Cross Table"</span>,</span>
<span>      x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">fact_vars_asl_orig</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="va">fact_vars_asl_orig</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">fact_vars_asl_orig</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="va">fact_vars_asl_orig</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_coxreg.html" class="external-link">tm_t_coxreg</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Cox Reg"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADTTE"</span>,</span>
<span>      arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>      arm_ref_comp <span class="op">=</span> <span class="va">arm_ref_comp</span>,</span>
<span>      paramcd <span class="op">=</span> <span class="va">cs_paramcd_tte</span>,</span>
<span>      strata_var <span class="op">=</span> <span class="va">cs_strata_var</span>,</span>
<span>      cov_var <span class="op">=</span> <span class="va">cs_cov_var</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_logistic.html" class="external-link">tm_t_logistic</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Logistic Reg"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADRS"</span>,</span>
<span>      arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>      arm_ref_comp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      paramcd <span class="op">=</span> <span class="va">cs_paramcd_rsp</span>,</span>
<span>      cov_var <span class="op">=</span> <span class="va">cs_cov_var</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_a_mmrm.html" class="external-link">tm_a_mmrm</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"MMRM"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADQS"</span>,</span>
<span>      aval_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVAL"</span>, <span class="st">"CHG"</span><span class="op">)</span>, <span class="st">"AVAL"</span><span class="op">)</span>,</span>
<span>      id_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"SUBJID"</span><span class="op">)</span>, <span class="st">"USUBJID"</span><span class="op">)</span>,</span>
<span>      arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>      visit_var <span class="op">=</span> <span class="va">cs_visit_var_qs</span>,</span>
<span>      arm_ref_comp <span class="op">=</span> <span class="va">arm_ref_comp</span>,</span>
<span>      paramcd <span class="op">=</span> <span class="va">cs_paramcd_qs</span>,</span>
<span>      cov_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BASE"</span>, <span class="st">"AGE"</span>, <span class="st">"SEX"</span>, <span class="st">"BASE:AVISIT"</span><span class="op">)</span>, <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>      conf_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.95</span>, <span class="fl">0.9</span>, <span class="fl">0.8</span><span class="op">)</span>, <span class="fl">0.95</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_binary_outcome.html" class="external-link">tm_t_binary_outcome</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Binary Response"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADRS"</span>,</span>
<span>      arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>      paramcd <span class="op">=</span> <span class="va">cs_paramcd_rsp</span>,</span>
<span>      strata_var <span class="op">=</span> <span class="va">cs_strata_var</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_ancova.html" class="external-link">tm_t_ancova</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"ANCOVA"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADQS"</span>,</span>
<span>      avisit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADQS</span>, <span class="st">"AVISIT"</span><span class="op">)</span>, <span class="st">"WEEK 1 DAY 8"</span><span class="op">)</span>,</span>
<span>      arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>      arm_ref_comp <span class="op">=</span> <span class="va">arm_ref_comp</span>,</span>
<span>      aval_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADQS</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVAL"</span>, <span class="st">"CHG"</span>, <span class="st">"PCHG"</span><span class="op">)</span><span class="op">)</span>, <span class="st">"CHG"</span><span class="op">)</span>,</span>
<span>      cov_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADQS</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BASE"</span>, <span class="st">"STRATA1"</span>, <span class="st">"SEX"</span><span class="op">)</span><span class="op">)</span>, <span class="st">"STRATA1"</span><span class="op">)</span>,</span>
<span>      paramcd <span class="op">=</span> <span class="va">cs_paramcd_qs</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  header <span class="op">=</span> <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>    class <span class="op">=</span> <span class="st">""</span>,</span>
<span>    style <span class="op">=</span> <span class="st">"margin-bottom: 2px;"</span>,</span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">h1</span><span class="op">(</span><span class="st">"Example App with teal.modules.clinical modules"</span>, <span class="va">tags</span><span class="op">$</span><span class="fu">span</span><span class="op">(</span><span class="st">"SPA"</span>, class <span class="op">=</span> <span class="st">"pull-right"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  footer <span class="op">=</span> <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span>class <span class="op">=</span> <span class="st">"text-muted"</span>, <span class="st">"Source: teal.gallery package"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="exploratory">exploratory<a class="anchor" aria-label="anchor" href="#exploratory"></a>
</h3>
<p>Deployed app: <a href="https://shinyapps.io/NEST/main/exploratory" class="external-link uri">https://shinyapps.io/NEST/main/exploratory</a></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="st">"teal.ggplot2_args"</span> <span class="op">=</span> <span class="fu">teal.widgets</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/teal.widgets/man/ggplot2_args.html" class="external-link">ggplot2_args</a></span><span class="op">(</span>labs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"NEST PROJECT"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">teal.modules.general</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">scda</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">scda.2022</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/nestcolor/" class="external-link">nestcolor</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">sparkline</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.r4photobiology.info/ggpmisc/" class="external-link">ggpmisc</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>shiny.useragg <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># code&gt;</span></span>
<span><span class="va">ADSL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adsl</span></span>
<span><span class="va">ADRS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adrs</span></span>
<span><span class="va">ADLB</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adlb</span></span>
<span></span>
<span><span class="va">ADLBPCA</span> <span class="op">&lt;-</span> <span class="va">ADLB</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">STUDYID</span>, <span class="va">SEX</span>, <span class="va">ARMCD</span>, <span class="va">AVAL</span>, <span class="va">AVISIT</span>, <span class="va">PARAMCD</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span></span>
<span>    values_from <span class="op">=</span> <span class="st">"AVAL"</span>,</span>
<span>    names_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PARAMCD"</span>, <span class="st">"AVISIT"</span><span class="op">)</span>,</span>
<span>    names_sep <span class="op">=</span> <span class="st">" - "</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADSL"</span>, <span class="va">ADSL</span>, code <span class="op">=</span> <span class="st">"ADSL &lt;- synthetic_cdisc_data(\"latest\")$adsl"</span><span class="op">)</span></span>
<span><span class="va">adrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADRS"</span>, <span class="va">ADRS</span>, code <span class="op">=</span> <span class="st">"ADRS &lt;- synthetic_cdisc_data(\"latest\")$adrs"</span><span class="op">)</span></span>
<span><span class="va">adlb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADLB"</span>, <span class="va">ADLB</span>, code <span class="op">=</span> <span class="st">"ADLB &lt;- synthetic_cdisc_data(\"latest\")$adlb"</span><span class="op">)</span></span>
<span><span class="va">adlbpca</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span></span>
<span>  <span class="st">"ADLBPCA"</span>,</span>
<span>  <span class="va">ADLBPCA</span>,</span>
<span>  code <span class="op">=</span> <span class="st">'ADLBPCA &lt;- ADLB %&gt;%</span></span>
<span><span class="st">    select(USUBJID, STUDYID, SEX, ARMCD, AVAL, AVISIT, PARAMCD) %&gt;%</span></span>
<span><span class="st">    pivot_wider(values_from = "AVAL",</span></span>
<span><span class="st">                names_from = c("PARAMCD", "AVISIT"),</span></span>
<span><span class="st">                names_sep = " - ")'</span>,</span>
<span>  keys <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"STUDYID"</span>, <span class="st">"USUBJID"</span><span class="op">)</span>,</span>
<span>  label <span class="op">=</span> <span class="st">"ADLB reshaped"</span>,</span>
<span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ADLB <span class="op">=</span> <span class="va">adlb</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># &lt;code</span></span>
<span></span>
<span><span class="va">adsl_extracted_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="st">"AGE"</span>,</span>
<span>    multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">adsl_extracted_num2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="st">"BMRKR1"</span>,</span>
<span>    multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">adsl_extracted_fct</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="st">"ARMCD"</span>,</span>
<span>    multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">fact_vars_adsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Filter</a></span><span class="op">(</span><span class="va">isTRUE</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">is.factor</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">adsl_extracted_fct2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, subset <span class="op">=</span> <span class="va">fact_vars_adsl</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="st">"STRATA2"</span>,</span>
<span>    multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">adsl_extracted_fct3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="st">"ARMCD"</span>,</span>
<span>    multiple <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">numeric_vars_adsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Filter</a></span><span class="op">(</span><span class="va">isTRUE</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">is.numeric</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">adsl_extracted_numeric</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, subset <span class="op">=</span> <span class="va">numeric_vars_adsl</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="st">"BMRKR1"</span>,</span>
<span>    multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">adsl_extracted_factors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, subset <span class="op">=</span> <span class="va">fact_vars_adsl</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">adsl_extracted_multi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGE"</span>, <span class="st">"BMRKR1"</span><span class="op">)</span>,</span>
<span>    multiple <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">adrs_filters</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/filter_spec.html" class="external-link">filter_spec</a></span><span class="op">(</span></span>
<span>  vars <span class="op">=</span> <span class="st">"PARAMCD"</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">" - "</span>,</span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADRS</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BESRSPI"</span>, <span class="st">"INVET"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"BESRSPI"</span>,</span>
<span>  multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  label <span class="op">=</span> <span class="st">"Choose endpoint"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">adrs_extracted_response</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADRS"</span>,</span>
<span>  filter <span class="op">=</span> <span class="va">adrs_filters</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADRS</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVALC"</span>, <span class="st">"AVAL"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="st">"AVALC"</span>,</span>
<span>    multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">fact_vars_adrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Filter</a></span><span class="op">(</span><span class="va">isTRUE</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">ADRS</span>, <span class="va">is.factor</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">adrs_extracted_response_fct</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADRS"</span>,</span>
<span>  filter <span class="op">=</span> <span class="va">adrs_filters</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADRS</span>, subset <span class="op">=</span> <span class="va">fact_vars_adrs</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="st">"AVALC"</span>,</span>
<span>    multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">adlb_filter_paramcd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/filter_spec.html" class="external-link">filter_spec</a></span><span class="op">(</span></span>
<span>  vars <span class="op">=</span> <span class="st">"PARAMCD"</span>,</span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">ADLB</span><span class="op">$</span><span class="va">PARAMCD</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  label <span class="op">=</span> <span class="st">"Select lab:"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">adlb_filter_paramcd2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/filter_spec.html" class="external-link">filter_spec</a></span><span class="op">(</span></span>
<span>  vars <span class="op">=</span> <span class="st">"PARAMCD"</span>,</span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">ADLB</span><span class="op">$</span><span class="va">PARAMCD</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>  multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  label <span class="op">=</span> <span class="st">"Select lab:"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">adlb_filter_visit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/filter_spec.html" class="external-link">filter_spec</a></span><span class="op">(</span></span>
<span>  vars <span class="op">=</span> <span class="st">"AVISIT"</span>,</span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">ADLB</span><span class="op">$</span><span class="va">AVISIT</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">ADLB</span><span class="op">$</span><span class="va">AVISIT</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  label <span class="op">=</span> <span class="st">"Select visit:"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">adlb_extracted_aval</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVAL"</span>, <span class="st">"CHG"</span>, <span class="st">"PCHG"</span>, <span class="st">"ANRIND"</span>, <span class="st">"BASE"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="st">"AVAL"</span>,</span>
<span>    multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span>,</span>
<span>  filter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="va">adlb_filter_paramcd</span>,</span>
<span>    <span class="va">adlb_filter_visit</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">numeric_vars_adlbpca</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Filter</a></span><span class="op">(</span><span class="va">isTRUE</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">ADLBPCA</span>, <span class="va">is.numeric</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">distr_filter_spec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/filter_spec.html" class="external-link">filter_spec</a></span><span class="op">(</span></span>
<span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">fact_vars_adsl</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="cn">NULL</span></span>
<span>  <span class="op">)</span>,</span>
<span>  multiple <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal/man/init.html" class="external-link">init</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_data.html" class="external-link">cdisc_data</a></span><span class="op">(</span><span class="va">adsl</span>, <span class="va">adrs</span>, <span class="va">adlb</span>, <span class="va">adlbpca</span><span class="op">)</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal/man/modules.html" class="external-link">modules</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_front_page.html" class="external-link">tm_front_page</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Study Information"</span>,</span>
<span>      header_text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Info about data source"</span> <span class="op">=</span> <span class="st">"Random data are used that have been created with the 'scda' R package"</span><span class="op">)</span>,</span>
<span>      tables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>`NEST packages used` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Packages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"teal.modules.general"</span>, <span class="st">"scda"</span>, <span class="st">"scda.2022"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_file_viewer.html" class="external-link">tm_file_viewer</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"File viewer"</span>,</span>
<span>      input_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        png <span class="op">=</span> <span class="st">"https://www.r-project.org/logo/Rlogo.png"</span>,</span>
<span>        Rmd <span class="op">=</span> <span class="st">"https://raw.githubusercontent.com/tidyverse/dplyr/master/README.Rmd"</span>,</span>
<span>        pdf <span class="op">=</span> <span class="st">"https://cran.r-project.org/web/packages/shinyTree/shinyTree.pdf"</span>,</span>
<span>        <span class="st">"example directory"</span> <span class="op">=</span> <span class="st">"./packrat/desc/"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_data_table.html" class="external-link">tm_data_table</a></span><span class="op">(</span><span class="st">"Data Table"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_variable_browser.html" class="external-link">tm_variable_browser</a></span><span class="op">(</span><span class="st">"Variable Browser"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_missing_data.html" class="external-link">tm_missing_data</a></span><span class="op">(</span><span class="st">"Missing Data"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_g_distribution.html" class="external-link">tm_g_distribution</a></span><span class="op">(</span></span>
<span>      <span class="st">"Distribution"</span>,</span>
<span>      dist_var <span class="op">=</span> <span class="va">adsl_extracted_numeric</span>,</span>
<span>      strata_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>        filter <span class="op">=</span> <span class="va">distr_filter_spec</span></span>
<span>      <span class="op">)</span>,</span>
<span>      group_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>        filter <span class="op">=</span> <span class="va">distr_filter_spec</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_outliers.html" class="external-link">tm_outliers</a></span><span class="op">(</span></span>
<span>      <span class="st">"Outliers"</span>,</span>
<span>      outlier_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVAL"</span>, <span class="st">"CHG"</span>, <span class="st">"PCHG"</span>, <span class="st">"BASE"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"AVAL"</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      categorical_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PARAM"</span>, <span class="st">"PARAMCD"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_g_association.html" class="external-link">tm_g_association</a></span><span class="op">(</span></span>
<span>      ref <span class="op">=</span> <span class="va">adsl_extracted_num</span>,</span>
<span>      vars <span class="op">=</span> <span class="va">adsl_extracted_fct3</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_g_bivariate.html" class="external-link">tm_g_bivariate</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">adsl_extracted_num</span>,</span>
<span>      y <span class="op">=</span> <span class="va">adlb_extracted_aval</span>,</span>
<span>      row_facet <span class="op">=</span> <span class="va">adsl_extracted_factors</span>,</span>
<span>      col_facet <span class="op">=</span> <span class="va">adsl_extracted_factors</span>,</span>
<span>      use_density <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>      plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600L</span>, <span class="fl">200L</span>, <span class="fl">2000L</span><span class="op">)</span>,</span>
<span>      ggtheme <span class="op">=</span> <span class="st">"gray"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_a_regression.html" class="external-link">tm_a_regression</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Regression"</span>,</span>
<span>      response <span class="op">=</span> <span class="va">adsl_extracted_numeric</span>,</span>
<span>      regressor <span class="op">=</span> <span class="va">adrs_extracted_response</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_g_response.html" class="external-link">tm_g_response</a></span><span class="op">(</span></span>
<span>      response <span class="op">=</span> <span class="va">adrs_extracted_response_fct</span>,</span>
<span>      x <span class="op">=</span> <span class="va">adsl_extracted_fct2</span>,</span>
<span>      row_facet <span class="op">=</span> <span class="va">adsl_extracted_factors</span>,</span>
<span>      col_facet <span class="op">=</span> <span class="va">adsl_extracted_factors</span>,</span>
<span>      coord_flip <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_g_scatterplotmatrix.html" class="external-link">tm_g_scatterplotmatrix</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Scatterplot matrix"</span>,</span>
<span>      variables <span class="op">=</span> <span class="va">adsl_extracted_multi</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_g_scatterplot.html" class="external-link">tm_g_scatterplot</a></span><span class="op">(</span></span>
<span>      <span class="st">"Scatterplot"</span>,</span>
<span>      x <span class="op">=</span> <span class="va">adsl_extracted_num</span>,</span>
<span>      y <span class="op">=</span> <span class="va">adsl_extracted_num2</span>,</span>
<span>      row_facet <span class="op">=</span> <span class="va">adsl_extracted_factors</span>,</span>
<span>      col_facet <span class="op">=</span> <span class="va">adsl_extracted_factors</span>,</span>
<span>      color_by <span class="op">=</span> <span class="va">adsl_extracted_factors</span>,</span>
<span>      size <span class="op">=</span> <span class="fl">3</span>, alpha <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600L</span>, <span class="fl">200L</span>, <span class="fl">2000L</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_t_crosstable.html" class="external-link">tm_t_crosstable</a></span><span class="op">(</span></span>
<span>      <span class="st">"Table Choices"</span>,</span>
<span>      x <span class="op">=</span> <span class="va">adsl_extracted_fct2</span>,</span>
<span>      y <span class="op">=</span> <span class="va">adsl_extracted_fct</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_a_pca.html" class="external-link">tm_a_pca</a></span><span class="op">(</span></span>
<span>      <span class="st">"Principal Component Analysis"</span>,</span>
<span>      dat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADLBPCA"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLBPCA</span>, <span class="va">numeric_vars_adlbpca</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ALT - WEEK 5 DAY 36"</span>, <span class="st">"CRP - WEEK 5 DAY 36"</span>, <span class="st">"IGA - WEEK 5 DAY 36"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          label <span class="op">=</span> <span class="st">"Variable"</span></span>
<span>        <span class="op">)</span>,</span>
<span>      <span class="op">)</span>,</span>
<span>      plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600L</span>, <span class="fl">200L</span>, <span class="fl">2000L</span><span class="op">)</span>,</span>
<span>      plot_width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600L</span>, <span class="fl">200L</span>, <span class="fl">2000L</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  header <span class="op">=</span> <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>    class <span class="op">=</span> <span class="st">""</span>,</span>
<span>    style <span class="op">=</span> <span class="st">"margin-bottom: 2px;"</span>,</span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">h1</span><span class="op">(</span><span class="st">"Example App with teal.modules.general modules"</span>, <span class="va">tags</span><span class="op">$</span><span class="fu">span</span><span class="op">(</span><span class="st">"SPA"</span>, class <span class="op">=</span> <span class="st">"pull-right"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  footer <span class="op">=</span> <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span>class <span class="op">=</span> <span class="st">"text-muted"</span>, <span class="st">"Source: teal.gallery package"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="longitudinal">longitudinal<a class="anchor" aria-label="anchor" href="#longitudinal"></a>
</h3>
<p>Deployed app: <a href="https://shinyapps.io/NEST/main/longitudinal" class="external-link uri">https://shinyapps.io/NEST/main/longitudinal</a></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>shiny.sanitize.errors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># attach required packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">scda</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">scda.2022</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">teal.goshawk</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/teal.modules.clinical" class="external-link">teal.modules.clinical</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">teal.modules.general</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">sparkline</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>shiny.useragg <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># study information: used to label app and in "Source Data" module</span></span>
<span><span class="va">ATYPE</span> <span class="op">&lt;-</span> <span class="st">"Exploratory"</span> <span class="co"># define here and in the "# code &gt;" section below</span></span>
<span><span class="va">TA</span> <span class="op">&lt;-</span> <span class="st">"I2ON"</span></span>
<span><span class="va">MOLECULE</span> <span class="op">&lt;-</span> <span class="st">"Demo Molecule"</span></span>
<span><span class="va">INDICATION</span> <span class="op">&lt;-</span> <span class="st">"Demo Indication"</span></span>
<span><span class="va">STUDY</span> <span class="op">&lt;-</span> <span class="st">"Demo Study"</span></span>
<span><span class="va">lead_spa_name</span> <span class="op">&lt;-</span> <span class="st">"John Doe"</span></span>
<span><span class="va">lead_spa_uid</span> <span class="op">&lt;-</span> <span class="st">"John_Doe"</span></span>
<span><span class="va">app_owner_name</span> <span class="op">&lt;-</span> <span class="st">"John Doe"</span></span>
<span><span class="va">app_owner_uid</span> <span class="op">&lt;-</span> <span class="st">"John_Doe"</span></span>
<span></span>
<span><span class="co"># code&gt;</span></span>
<span></span>
<span><span class="co"># expected data are ADSL and ADLB</span></span>
<span><span class="co"># other data can be included but needs to be added to ADSL or ADLB as appropriate</span></span>
<span><span class="co"># depending on if the data are SUBJECT LEVEL ANALYSIS DATASET or BASIC DATA STRUCTURE</span></span>
<span><span class="co"># if for example outcome variables are added to ADSL then do also add them as columns to ADLB</span></span>
<span><span class="co"># this is needed to be able to use plot splitting by outcome functionality</span></span>
<span><span class="va">ADSL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adsl</span></span>
<span><span class="va">ADLB</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adlb</span></span>
<span></span>
<span><span class="co">################################################################################</span></span>
<span><span class="co"># BEGIN: SPA Input Required To Modify Values Below To Reflect Study Specifics</span></span>
<span><span class="co">################################################################################</span></span>
<span></span>
<span><span class="co"># assign LOQ flag symbols: circles for "N" and triangles for "Y", squares for "NA"</span></span>
<span><span class="va">shape_manual</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"N"</span> <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="st">"Y"</span> <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  <span class="st">"NA"</span> <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># study specific biomarkers of interest to exclude from performing log2 calculation done below</span></span>
<span><span class="co"># for example if biomarker is already log2 transformed then exclude</span></span>
<span><span class="co"># value of AVAL will then be assigned to XXXXXL2 variables. e.g. AVALL2</span></span>
<span><span class="co"># e.g. if x assay is already log2 transformed then assigns AVAL to AVALL2</span></span>
<span><span class="va">exclude_l2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># for example if study specific biomarker represents a CHG value then exclude</span></span>
<span><span class="co"># value NA is assigned to XXXXXL2. e.g. AVALL2</span></span>
<span><span class="co"># e.g. if x assay are CHG values then assigns NA to AVALL2</span></span>
<span><span class="va">exclude_chg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># the app expects ARM to be the main treatment variable</span></span>
<span><span class="co"># to use other treatment variables it is easiest to rename to ARM and process as ARM</span></span>
<span></span>
<span><span class="co"># convenience function: simply reduces typing effort especially if there are a lot of treatment arms</span></span>
<span><span class="co"># run once to create treatment mapping code for assigning arm_mapping variable below</span></span>
<span><span class="co"># this function writes the code framework to the console</span></span>
<span><span class="co"># copy code lines from console and provide right hand side values as desired</span></span>
<span><span class="co"># maptrt(df_arm = ADSL$TRT01P, code = "M")</span></span>
<span></span>
<span><span class="co"># ARM mapping: used to map dose values as ARM values or to abbreviate long treatment values for improved display</span></span>
<span><span class="co"># "original ARM value" = "displayed treatment value".</span></span>
<span><span class="co"># the customized values may be the same value as original if this functionality isn't needed</span></span>
<span><span class="co"># but the arm_mapping still needs to be defined</span></span>
<span><span class="va">arm_mapping</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"A: Drug X"</span> <span class="op">=</span> <span class="st">"Drug X 100mg"</span>,</span>
<span>  <span class="st">"C: Combination"</span> <span class="op">=</span> <span class="st">"Combination 100mg"</span>,</span>
<span>  <span class="st">"B: Placebo"</span> <span class="op">=</span> <span class="st">"Placebo"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># for consistency: assign treatment colors to match those used in other outputs. left hand side values need to</span></span>
<span><span class="co"># match values on right hand side of arm_mapping done above</span></span>
<span><span class="va">color_manual</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"Drug X 100mg"</span> <span class="op">=</span> <span class="st">"#1e90ff"</span>,</span>
<span>  <span class="st">"Combination 100mg"</span> <span class="op">=</span> <span class="st">"#bb9990"</span>,</span>
<span>  <span class="st">"Placebo"</span> <span class="op">=</span> <span class="st">"#ffa07a"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># convenience function: run once to create treatment ordering code for TRTORD variable below.</span></span>
<span><span class="co"># this function writes the code framework to the console</span></span>
<span><span class="co"># copy code lines from console and provide right hand side values as desired.</span></span>
<span><span class="co"># maptrt(df_arm = ADSL$TRT01P, code = "O")</span></span>
<span></span>
<span><span class="co"># convenience operator: create an operator that keeps the variable attributes</span></span>
<span><span class="co"># variable labels often get clobbered and we would like to keep them)</span></span>
<span><span class="va">`%keep_label%`</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">lhv</span>, <span class="va">rhv</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">lhv</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">rhv</span><span class="op">)</span></span>
<span>  <span class="va">lhv</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># convenience operator: create an operator that adds a label to newly created or re-processed variables</span></span>
<span><span class="va">`%make_label%`</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">lhv</span>, <span class="va">label</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">lhv</span>, <span class="st">"label"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">label</span></span>
<span>  <span class="va">lhv</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># post process the ADSL data to subset records per specification</span></span>
<span><span class="va">ADSL</span> <span class="op">&lt;-</span> <span class="va">ADSL</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ITTFL</span> <span class="op">==</span> <span class="st">"Y"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># use TRT01P values to order treatment in visualization legend and accompanying summary tables</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    TRTORD <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">TRT01P</span> <span class="op">==</span> <span class="st">"A: Drug X"</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>      <span class="va">TRT01P</span> <span class="op">==</span> <span class="st">"C: Combination"</span> <span class="op">~</span> <span class="fl">2</span>,</span>
<span>      <span class="va">TRT01P</span> <span class="op">==</span> <span class="st">"B: Placebo"</span> <span class="op">~</span> <span class="fl">3</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    TRTORD <span class="op">=</span> <span class="va">TRTORD</span> <span class="op">%make_label%</span> <span class="st">"Treatment Order"</span>,</span>
<span>    TRT01P <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">arm_mapping</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/match.html" class="external-link">match</a></span><span class="op">(</span><span class="va">TRT01P</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">arm_mapping</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    TRT01P <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">ARM</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">TRTORD</span><span class="op">)</span>,</span>
<span>    TRT01P <span class="op">=</span> <span class="va">TRT01P</span> <span class="op">%make_label%</span> <span class="st">"Planned Treatment for Period 01"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># capture state of variable labels to apply back onto variables after data filtering</span></span>
<span><span class="va">adsl_labels</span> <span class="op">&lt;-</span> <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span></span>
<span><span class="va">date_vars_adsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Date"</span>, <span class="st">"POSIXct"</span>, <span class="st">"POSIXlt"</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">char_vars_adsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Filter</a></span><span class="op">(</span><span class="va">isTRUE</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">is.character</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># set all character class variables to class factor required by NEST functions</span></span>
<span><span class="va">ADSL</span> <span class="op">&lt;-</span> <span class="va">ADSL</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html" class="external-link">mutate_at</a></span><span class="op">(</span><span class="va">char_vars_adsl</span>, <span class="va">factor</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add labels back onto variables</span></span>
<span><span class="fu">var_labels</span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">adsl_labels</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># post process the ADLB data to subset records per specification</span></span>
<span><span class="co"># goshawk expects the following variables: AVISITCD, AVALU, BASE2, CHG2, LBSTRESC, LOQFL, PCHG2</span></span>
<span><span class="co"># AVISITCD is assigned abbreviated values of AVISIT. this allows for more efficient use of plot real estate for the plot itself</span></span>
<span><span class="co">#   if this is not helpful then simply AVISITCD &lt;- AVISIT</span></span>
<span><span class="co"># AVISITCDN is assigned intuitive numeric values from AVISITCD. if this is not helpful then simply AVISITCDN &lt;- AVISITN</span></span>
<span><span class="co"># BASE2 represents screening visit value. if this is not relevant for your study then BASE2 &lt;- NA</span></span>
<span><span class="co"># CHG2 represents change from screening visit value. if this is not relevant for your study then CHG2 &lt;- NA</span></span>
<span><span class="co"># PCHG2 represents % change from screening visit value. if this is not relevant for your study then PCHG2 &lt;- NA</span></span>
<span><span class="co"># if you would like to include screening visit related "change from ..." analysis</span></span>
<span><span class="co"># variables in the analysis variable menu then do the following:</span></span>
<span><span class="co">#   create BASE2 and assign it AVAL values at screening visit</span></span>
<span><span class="co">#   create CHG2 and assign it change from screening values</span></span>
<span><span class="co">#   create PCHG2 and assign it % change from screening values</span></span>
<span><span class="co"># LBSTRESC is carried forward from SDTM and used for deriving an AVAL value and assigning the LOQFL value</span></span>
<span><span class="co">#  - expectation is that LBSTRESC LOQ values are "&lt; x" or "&gt; y" format.</span></span>
<span><span class="co">#  - value assigned to AVAL is x/2 and y respectively. LOQFL is assigned "Y"</span></span>
<span><span class="co">#  - other LBSTRESC value formats will need to be pre-processed so that AVAL and LOQFL are assigned as desired</span></span>
<span><span class="co"># LOQFL represents limit of quantitation flag. if this is not relevant for your study then LOQFL &lt;- NA</span></span>
<span><span class="co"># goshawk expectation is to only keep "SCREENING", "BASELINE", "DAY xx", "WEEK yy", "FOLLOW zz" type AVISIT values</span></span>
<span><span class="co"># other values can be adjusted for as well of course but this is study specific pre-processing that needs to be done</span></span>
<span></span>
<span><span class="co"># adjust select based on your study specifics</span></span>
<span><span class="va">ADLB_SUBSET</span> <span class="op">&lt;-</span> <span class="va">ADLB</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ITTFL</span> <span class="op">==</span> <span class="st">"Y"</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">toupper</a></span><span class="op">(</span><span class="va">AVISIT</span><span class="op">)</span> <span class="op">%like any%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SCREEN%"</span>, <span class="st">"BASE%"</span>, <span class="st">"%WEEK%"</span>, <span class="st">"%FOLLOW%"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"STUDYID"</span>, <span class="st">"USUBJID"</span>,</span>
<span>    <span class="st">"ITTFL"</span>,</span>
<span>    <span class="st">"ARM"</span>, <span class="st">"ARMCD"</span>, <span class="st">"ACTARM"</span>, <span class="st">"ACTARMCD"</span>, <span class="st">"TRT01P"</span>, <span class="st">"TRT01A"</span>,</span>
<span>    <span class="st">"AVISIT"</span>, <span class="st">"AVISITN"</span>, <span class="st">"ADY"</span>,</span>
<span>    <span class="st">"PARAM"</span>, <span class="st">"PARAMCD"</span>,</span>
<span>    <span class="st">"AVAL"</span>, <span class="st">"AVALU"</span>, <span class="st">"BASE"</span>, <span class="st">"CHG"</span>, <span class="st">"PCHG"</span>,</span>
<span>    <span class="st">"ANRLO"</span>, <span class="st">"ANRHI"</span>,</span>
<span>    <span class="st">"LBSTRESC"</span>,</span>
<span>    <span class="st">"SEX"</span>, <span class="st">"RACE"</span>,</span>
<span>    <span class="st">"LOQFL"</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    <span class="co"># adjust substr to work with study specific values</span></span>
<span>    AVISITCD <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">toupper</a></span><span class="op">(</span><span class="va">AVISIT</span><span class="op">)</span> <span class="op">==</span> <span class="st">"SCREENING"</span> <span class="op">~</span> <span class="st">"SCR"</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">toupper</a></span><span class="op">(</span><span class="va">AVISIT</span><span class="op">)</span> <span class="op">==</span> <span class="st">"BASELINE"</span> <span class="op">~</span> <span class="st">"BL"</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"WEEK"</span>, <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">toupper</a></span><span class="op">(</span><span class="va">AVISIT</span><span class="op">)</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"W"</span>, <span class="fu"><a href="https://rdrr.io/r/base/trimws.html" class="external-link">trimws</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">AVISIT</span>, start <span class="op">=</span> <span class="fl">6</span>, stop <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_locate.html" class="external-link">str_locate</a></span><span class="op">(</span><span class="va">AVISIT</span>, <span class="st">"DAY"</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"FOLLOW"</span>, <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">toupper</a></span><span class="op">(</span><span class="va">AVISIT</span><span class="op">)</span><span class="op">)</span> <span class="op">~</span> <span class="st">"FU"</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    AVISITCDN <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">AVISITCD</span> <span class="op">==</span> <span class="st">"SCR"</span> <span class="op">~</span> <span class="op">-</span><span class="fl">2</span>,</span>
<span>      <span class="va">AVISITCD</span> <span class="op">==</span> <span class="st">"BL"</span> <span class="op">~</span> <span class="fl">0</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"W"</span>, <span class="va">AVISITCD</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"[^0-9]+"</span>, <span class="st">""</span>, <span class="va">AVISITCD</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="fl">7</span>,</span>
<span>      <span class="va">AVISITCD</span> <span class="op">==</span> <span class="st">"FU"</span> <span class="op">~</span> <span class="fl">100</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    TRTORD <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">TRT01P</span> <span class="op">==</span> <span class="st">"A: Drug X"</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>      <span class="va">TRT01P</span> <span class="op">==</span> <span class="st">"C: Combination"</span> <span class="op">~</span> <span class="fl">2</span>,</span>
<span>      <span class="va">TRT01P</span> <span class="op">==</span> <span class="st">"B: Placebo"</span> <span class="op">~</span> <span class="fl">3</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    LOQFL <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">LOQFL</span><span class="op">)</span> <span class="op">==</span> <span class="st">"Y"</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">LOQFL</span><span class="op">)</span>, <span class="st">"N"</span><span class="op">)</span>, <span class="co"># need explicit "N" value for LOQFL</span></span>
<span>    BASE2 <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    CHG2 <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    PCHG2 <span class="op">=</span> <span class="cn">NA</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rowwise.html" class="external-link">rowwise</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">PARAMCD</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># only used for producing LOQ values in synthetic data not for study use</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>LBSTRESC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span></span>
<span>    <span class="va">USUBJID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="fl">1</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"&lt;"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, min <span class="op">=</span> <span class="fl">25</span>, max <span class="op">=</span> <span class="fl">30</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="va">LBSTRESC</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>LBSTRESC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">USUBJID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="fl">1</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"&gt;"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, min <span class="op">=</span> <span class="fl">70</span>, max <span class="op">=</span> <span class="fl">75</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="va">LBSTRESC</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">ADLB_SUBSET</span><span class="op">[[</span><span class="st">"LBSTRESC"</span><span class="op">]</span><span class="op">]</span>, <span class="st">"label"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Character Result/Finding in Std Format"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">ADLB_SUBSET</span><span class="op">[[</span><span class="st">"ANRLO"</span><span class="op">]</span><span class="op">]</span>, <span class="st">"label"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Analysis Normal Range Lower Limit"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">ADLB_SUBSET</span><span class="op">[[</span><span class="st">"ANRHI"</span><span class="op">]</span><span class="op">]</span>, <span class="st">"label"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Analysis Normal Range Upper Limit"</span></span>
<span></span>
<span><span class="co"># combined treatment and lineplot statistics overlay color</span></span>
<span><span class="va">color_comb</span> <span class="op">&lt;-</span> <span class="st">"#39ff14"</span></span>
<span></span>
<span><span class="co"># line and spaghetti plot x-axis tic and label controls. identify key visits to display at ticks</span></span>
<span><span class="co"># numeric comes from the AVISITCDN variable which controls chronological order</span></span>
<span><span class="va">x_tick_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">7</span>, <span class="fl">14</span>, <span class="fl">21</span>, <span class="fl">28</span>, <span class="fl">35</span><span class="op">)</span></span>
<span><span class="co"># label values are assigned here and can be customized or AVISITCD values</span></span>
<span><span class="va">x_tick_label</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Screening"</span>, <span class="st">"Baseline"</span>, <span class="st">"Week 1"</span>, <span class="st">"Week 2"</span>, <span class="st">"Week 3"</span>, <span class="st">"Week 4"</span>, <span class="st">"Week 5"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">################################################################################</span></span>
<span><span class="co"># END: SPA Input Required</span></span>
<span><span class="co">################################################################################</span></span>
<span></span>
<span><span class="co">################################################################################</span></span>
<span><span class="co"># BEGIN: Generic Data Post Processing</span></span>
<span><span class="co">################################################################################</span></span>
<span></span>
<span><span class="co"># identify the minimum non-zero value for AVAL for each PARAMCD.</span></span>
<span><span class="co"># non-zero minimum value used for log2 transformed analysis values</span></span>
<span><span class="va">PARAM_MINS</span> <span class="op">&lt;-</span> <span class="va">ADLB_SUBSET</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">PARAMCD</span>, <span class="va">AVAL</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">PARAMCD</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>AVAL_MIN <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">AVAL</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>PARAMCD <span class="op">=</span> <span class="va">PARAMCD</span> <span class="op">%make_label%</span> <span class="st">"Parameter Code"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># post process the data to create several new variables and adjust existing record specific values per specification</span></span>
<span><span class="co"># - adjust existing BASELINE record values where values are missing</span></span>
<span><span class="va">ADLB_SUPED1</span> <span class="op">&lt;-</span> <span class="va">ADLB_SUBSET</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>BASE2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">toupper</a></span><span class="op">(</span><span class="va">AVISIT</span><span class="op">)</span> <span class="op">==</span> <span class="st">"SCREENING"</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">BASE2</span><span class="op">)</span>, <span class="va">AVAL</span>, <span class="va">BASE2</span><span class="op">)</span> <span class="op">%keep_label%</span> <span class="va">BASE2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>CHG2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">toupper</a></span><span class="op">(</span><span class="va">AVISIT</span><span class="op">)</span> <span class="op">==</span> <span class="st">"SCREENING"</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">CHG2</span><span class="op">)</span>, <span class="fl">0</span>, <span class="va">CHG2</span><span class="op">)</span> <span class="op">%keep_label%</span> <span class="va">CHG2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>PCHG2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">toupper</a></span><span class="op">(</span><span class="va">AVISIT</span><span class="op">)</span> <span class="op">==</span> <span class="st">"SCREENING"</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">PCHG2</span><span class="op">)</span>, <span class="fl">0</span>, <span class="va">PCHG2</span><span class="op">)</span> <span class="op">%keep_label%</span> <span class="va">PCHG2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>BASE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">toupper</a></span><span class="op">(</span><span class="va">AVISIT</span><span class="op">)</span> <span class="op">==</span> <span class="st">"BASELINE"</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">BASE</span><span class="op">)</span>, <span class="va">AVAL</span>, <span class="va">BASE</span><span class="op">)</span> <span class="op">%keep_label%</span> <span class="va">BASE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>CHG <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">toupper</a></span><span class="op">(</span><span class="va">AVISIT</span><span class="op">)</span> <span class="op">==</span> <span class="st">"BASELINE"</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">CHG</span><span class="op">)</span>, <span class="fl">0</span>, <span class="va">CHG</span><span class="op">)</span> <span class="op">%keep_label%</span> <span class="va">CHG</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>PCHG <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">toupper</a></span><span class="op">(</span><span class="va">AVISIT</span><span class="op">)</span> <span class="op">==</span> <span class="st">"BASELINE"</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">PCHG</span><span class="op">)</span>, <span class="fl">0</span>, <span class="va">PCHG</span><span class="op">)</span> <span class="op">%keep_label%</span> <span class="va">PCHG</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>TRTORD <span class="op">=</span> <span class="va">TRTORD</span> <span class="op">%make_label%</span> <span class="st">"Treatment Order"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Inconsequential Warning issued: Warning: "PARAMCD" has different attributes on LHS and RHS of join.</span></span>
<span><span class="co"># merge minimum AVAL value onto the ADLB data to calculate the log2 variables. preserve the variable order</span></span>
<span><span class="va">ADLB_SUPED2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">PARAM_MINS</span>, <span class="va">ADLB_SUPED1</span>, by <span class="op">=</span> <span class="st">"PARAMCD"</span><span class="op">)</span><span class="op">[</span>, <span class="fu"><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">union</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADLB_SUPED1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">PARAM_MINS</span><span class="op">)</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># visit values</span></span>
<span>  <span class="co"># excludes biomarkers where log2 is not appropriate: for example assay value already log2</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>AVALL2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">PARAMCD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">exclude_l2</span>, <span class="va">AVAL</span>,</span>
<span>    <span class="co"># excludes biomarkers where log2 is not appropriate: for example CHG type assay</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">PARAMCD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">exclude_chg</span>, <span class="cn">NA</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">AVAL</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">AVAL_MIN</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log2</a></span><span class="op">(</span><span class="va">AVAL_MIN</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>        <span class="co"># would be taking log2 of 0 or negative value so set to NA</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">AVAL</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">AVAL_MIN</span> <span class="op">&lt;=</span> <span class="fl">0</span>, <span class="cn">NA</span>,</span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">AVAL</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log2</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%make_label%</span> <span class="st">"Log2 of AVAL"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># baseline values</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>BASEL2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">PARAMCD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">exclude_l2</span>, <span class="va">BASE</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">PARAMCD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">exclude_chg</span>, <span class="cn">NA</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">BASE</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">AVAL_MIN</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log2</a></span><span class="op">(</span><span class="va">AVAL_MIN</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">BASE</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">AVAL_MIN</span> <span class="op">&lt;=</span> <span class="fl">0</span>, <span class="cn">NA</span>,</span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">BASE</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log2</a></span><span class="op">(</span><span class="va">BASE</span><span class="op">)</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%make_label%</span> <span class="st">"Log2 of BASE"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># screening</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>BASE2L2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">PARAMCD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">exclude_l2</span>, <span class="va">BASE2</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">PARAMCD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">exclude_chg</span>, <span class="cn">NA</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">BASE2</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">AVAL_MIN</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log2</a></span><span class="op">(</span><span class="va">AVAL_MIN</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">BASE2</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">AVAL_MIN</span> <span class="op">&lt;=</span> <span class="fl">0</span>, <span class="cn">NA</span>,</span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">BASE2</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log2</a></span><span class="op">(</span><span class="va">BASE2</span><span class="op">)</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%make_label%</span> <span class="st">"Log2 of BASE2"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>AVAL_MIN <span class="op">=</span> <span class="va">AVAL_MIN</span> <span class="op">%make_label%</span> <span class="st">"Minimum AVAL Within PARAMCD"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create final data set used by goshawk</span></span>
<span><span class="co"># all data set passed into a goshawk app must have all of the columns</span></span>
<span><span class="co"># `AVISITCD`, `BASE`, `BASE2`, `AVALU`, `LBSTRESC`, `LOQFL`, `CHG2`, and `PCHG2`.</span></span>
<span><span class="va">ADLB</span> <span class="op">&lt;-</span> <span class="va">ADLB_SUPED2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    TRT01P <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">arm_mapping</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/match.html" class="external-link">match</a></span><span class="op">(</span><span class="va">TRT01P</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">arm_mapping</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    TRT01P <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">TRT01P</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">TRTORD</span><span class="op">)</span> <span class="op">%make_label%</span> <span class="st">"Planned Treatment for Period 01"</span>,</span>
<span>    TRT01A <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">arm_mapping</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/match.html" class="external-link">match</a></span><span class="op">(</span><span class="va">TRT01A</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">arm_mapping</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    TRT01A <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">TRT01A</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">TRTORD</span><span class="op">)</span> <span class="op">%make_label%</span> <span class="st">"Actual Treatment for Period 01"</span>,</span>
<span>    LOQFL <span class="op">=</span> <span class="va">LOQFL</span> <span class="op">%make_label%</span> <span class="st">"Limit of Quantification"</span>,</span>
<span>    AVISITCD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">AVISITCD</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">AVISITCDN</span><span class="op">)</span> <span class="op">%make_label%</span> <span class="st">"Analysis Visit Window Code"</span>,</span>
<span>    AVISITCDN <span class="op">=</span> <span class="va">AVISITCDN</span> <span class="op">%make_label%</span> <span class="st">"Analysis Visit Window Code (N)"</span>,</span>
<span>    BASE2 <span class="op">=</span> <span class="va">BASE2</span> <span class="op">%make_label%</span> <span class="st">"Screening Value"</span>,</span>
<span>    CHG2 <span class="op">=</span> <span class="va">CHG2</span> <span class="op">%make_label%</span> <span class="st">"Absolute Change from Screening"</span>,</span>
<span>    PCHG2 <span class="op">=</span> <span class="va">PCHG2</span> <span class="op">%make_label%</span> <span class="st">"Percent Change from Screening"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># add LLOQ and ULOQ variables to support adding horizontal/vertical range lines</span></span>
<span><span class="co"># LBSTRESC is carried forward from SDTM and used for deriving an AVAL value and assigning the LOQFL value</span></span>
<span><span class="co">#  - expectation is that LBSTRESC LOQ values are "&lt; x" or "&gt; y" format.</span></span>
<span><span class="co">#  - value assigned to AVAL is x/2 and y respectively. LOQFL is assigned "Y"</span></span>
<span><span class="co">#  - other LBSTRESC value formats will need to be pre-pocessed so that AVAL and LOQFL are assigned as desired</span></span>
<span><span class="co"># LBSTRESC is required in order to use the h_identify_loq_values function. if this is not available then LBSTRESC &lt;- AVAL</span></span>
<span><span class="va">ADLB_LOQS</span> <span class="op">&lt;-</span> <span class="fu">goshawk</span><span class="fu">:::</span><span class="fu"><a href="https://rdrr.io/pkg/goshawk/man/h_identify_loq_values.html" class="external-link">h_identify_loq_values</a></span><span class="op">(</span><span class="va">ADLB</span><span class="op">)</span></span>
<span><span class="va">ADLB</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="va">ADLB_LOQS</span>, by <span class="op">=</span> <span class="st">"PARAM"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">################################################################################</span></span>
<span><span class="co"># END: Generic Data Post Processing</span></span>
<span><span class="co">################################################################################</span></span>
<span></span>
<span><span class="co"># &lt;code</span></span>
<span></span>
<span><span class="co"># USER INTERFACE CONFIGURATIONS: match with available analysis variables to display them in pull down menus</span></span>
<span><span class="va">arm_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TRT01A"</span>, <span class="st">"TRT01P"</span>, <span class="st">"SEX"</span>, <span class="st">"RACE"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">demog_vars_asl</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">date_vars_asl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span><span class="va">data</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Date"</span>, <span class="st">"POSIXct"</span>, <span class="st">"POSIXlt"</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">[</span><span class="op">!</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span>, <span class="va">date_vars_asl</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">anl_vars1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVAL"</span>, <span class="st">"BASE"</span>, <span class="st">"CHG"</span>, <span class="st">"PCHG"</span>, <span class="st">"AVALL2"</span><span class="op">)</span></span>
<span><span class="va">anl_vars2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVAL"</span>, <span class="st">"CHG"</span>, <span class="st">"PCHG"</span>, <span class="st">"AVALL2"</span><span class="op">)</span></span>
<span><span class="va">box_xaxis_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TRT01A"</span>, <span class="st">"TRT01P"</span>, <span class="st">"AVISITCD"</span>, <span class="st">"STUDYID"</span><span class="op">)</span></span>
<span><span class="va">dm_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEX"</span>, <span class="st">"AGE"</span>, <span class="st">"RACE"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># response variable menu controls. match with available response variables in ADLB</span></span>
<span><span class="va">box_facet_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TRT01A"</span>, <span class="st">"TRT01P"</span>, <span class="st">"AVISITCD"</span><span class="op">)</span></span>
<span><span class="va">line_splits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEX"</span><span class="op">)</span></span>
<span><span class="va">cs_params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span>choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="st">"ADLB"</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span>, selected <span class="op">=</span> <span class="st">"ALT"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_arm_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="st">"ADSL"</span>, subset <span class="op">=</span> <span class="va">arm_vars</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"TRT01A"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_anl_vars1_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="st">"ADLB"</span>, subset <span class="op">=</span> <span class="va">anl_vars1</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"BASE"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_anl_vars1_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="st">"ADLB"</span>, subset <span class="op">=</span> <span class="va">anl_vars1</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"AVAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_anl_vars2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="st">"ADLB"</span>, subset <span class="op">=</span> <span class="va">anl_vars2</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"AVAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_dm_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="st">"ADSL"</span>, <span class="va">demog_vars_asl</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="va">dm_vars</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_box_facet_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="st">"ADLB"</span>, subset <span class="op">=</span> <span class="va">box_facet_vars</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"AVISITCD"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_box_xaxis_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="st">"ADLB"</span>, subset <span class="op">=</span> <span class="va">box_xaxis_vars</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="st">"TRT01P"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cs_line_splits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="st">"ADSL"</span>, subset <span class="op">=</span> <span class="va">line_splits</span><span class="op">)</span>,</span>
<span>  selected <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create ADSL metadata for Source Data tab</span></span>
<span><span class="va">adsl_source</span> <span class="op">&lt;-</span> <span class="st">"Randomly generated CDISC data"</span></span>
<span><span class="va">adsl_time</span> <span class="op">&lt;-</span> <span class="st">"Current"</span></span>
<span></span>
<span><span class="va">sdsl_label</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Subject Level Analysis Data Set"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get number of subjects</span></span>
<span><span class="va">sdsl_nsubjs</span> <span class="op">&lt;-</span> <span class="va">ADSL</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create ADLB metadata for Source Data tab</span></span>
<span><span class="va">adlb_source</span> <span class="op">&lt;-</span> <span class="st">"Randomly generated CDISC data"</span></span>
<span><span class="va">adlb_time</span> <span class="op">&lt;-</span> <span class="st">"Current"</span></span>
<span></span>
<span><span class="va">sdlb_label</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Laboratory/Biomarker Analysis Data Set"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get number of subjects</span></span>
<span><span class="va">sdlb_nsubjs</span> <span class="op">&lt;-</span> <span class="va">ADLB</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">USUBJID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create biomarkers of interest dictionary table to display to user</span></span>
<span><span class="va">paramDict</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">ADLB</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PARAM"</span>, <span class="st">"PARAMCD"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">paramDict</span> <span class="op">&lt;-</span> <span class="va">paramDict</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">paramDict</span><span class="op">$</span><span class="va">PARAM</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="va">param_list</span> <span class="op">&lt;-</span> <span class="va">paramDict</span><span class="op">$</span><span class="va">PARAM</span></span>
<span><span class="va">paramcd_list</span> <span class="op">&lt;-</span> <span class="va">paramDict</span><span class="op">$</span><span class="va">PARAMCD</span></span>
<span></span>
<span><span class="co"># create list of biomarkers excluded from log2 transformation</span></span>
<span><span class="va">paramexcldDict</span> <span class="op">&lt;-</span> <span class="va">paramDict</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">PARAMCD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">exclude_l2</span>, <span class="va">exclude_chg</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">paramexcld_list</span> <span class="op">&lt;-</span> <span class="va">paramexcldDict</span><span class="op">$</span><span class="va">PARAM</span></span>
<span><span class="va">paramcdexcld_list</span> <span class="op">&lt;-</span> <span class="va">paramexcldDict</span><span class="op">$</span><span class="va">PARAMCD</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">teal</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/teal/man/init.html" class="external-link">init</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_data.html" class="external-link">cdisc_data</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADSL"</span>, <span class="va">ADSL</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADLB"</span>, <span class="va">ADLB</span><span class="op">)</span>,</span>
<span>    code <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/get_code.html" class="external-link">get_code</a></span><span class="op">(</span><span class="st">"app.R"</span>,</span>
<span>      exclude_comments <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>      read_sources <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span>,</span>
<span>    check <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal/man/modules.html" class="external-link">modules</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal/man/module.html" class="external-link">module</a></span><span class="op">(</span></span>
<span>      <span class="st">"User Guide"</span>,</span>
<span>      server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span>, <span class="va">datasets</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span>,</span>
<span>      ui <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h5</a></span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Analysis Variable Legend"</span><span class="op">)</span>, <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/actionButton.html" class="external-link">actionLink</a></span><span class="op">(</span><span class="st">"showAnlVarLegendModal"</span>, <span class="va">tags</span><span class="op">$</span><span class="fu">img</span><span class="op">(</span></span>
<span>              height <span class="op">=</span> <span class="fl">15</span>, width <span class="op">=</span> <span class="fl">15</span>,</span>
<span>              src <span class="op">=</span> <span class="st">"img/qmark.png"</span></span>
<span>            <span class="op">)</span><span class="op">)</span></span>
<span>          <span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h5</a></span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Key Variables:"</span><span class="op">)</span></span>
<span>          <span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span></span>
<span>              <span class="st">"The 'Description of Planned Arm' (ARM/TRT01P) variable is used to reflect ITT treatment for these longitudinal</span></span>
<span><span class="st">              visualizations. Alternative treatment variables and populations can be used as appropriate."</span></span>
<span>            <span class="op">)</span>,</span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span></span>
<span>              <span class="st">"The 'Parameter Code' (PARAMCD) variable is used to select biomarker/lab of interest.</span></span>
<span><span class="st">              The 'Source Data' tab provides the 'Parameter Description' (PARAM). The biomarker/lab selection pull down</span></span>
<span><span class="st">              menu items are a concatenation of PARAMCD with PARAM for ease of identification."</span></span>
<span>            <span class="op">)</span>,</span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span></span>
<span>              <span class="st">"Pull down menus containing many items include search functionality to ease finding menu items."</span></span>
<span>            <span class="op">)</span>,</span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span></span>
<span>              <span class="st">"The 'Analysis Visit' (AVISIT) variable is used to display visit as an abbreviated analysis visit value."</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h5</a></span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Data Constraint Filter:"</span><span class="op">)</span></span>
<span>          <span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span></span>
<span>              <span class="st">"Selecting the Screening constraint will remove subjects who do not satisfy the filter range based on</span></span>
<span><span class="st">            their screening value for the given assay."</span></span>
<span>            <span class="op">)</span>,</span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span></span>
<span>              <span class="st">"Selecting the Baseline constraint will remove subjects who do not satisfy the filter range based on</span></span>
<span><span class="st">            their baseline value for the given assay."</span></span>
<span>            <span class="op">)</span>,</span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span></span>
<span>              <span class="st">"Let's say subject #58 has a baseline value of 5 for assay x and the range of assay x across all</span></span>
<span><span class="st">            subjects is 1 to 10. If the the baseline constraint is selected and the value range slider is changed</span></span>
<span><span class="st">            to a range of 7 to 10 then subjects who do not meet that condition are removed from the longitudinal</span></span>
<span><span class="st">            visualizations. Since subject #58 baseline value is 5 for assay x they are one of the subjects who is</span></span>
<span><span class="st">            removed."</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h5</a></span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Data Point Brushing:"</span><span class="op">)</span></span>
<span>          <span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span></span>
<span>              <span class="st">"Selecting specific data points to reveal Subject ID and other data are available for Box, Correlation and</span></span>
<span><span class="st">              Spaghetti Plot visualizations."</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h5</a></span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Log2 Variables:"</span><span class="op">)</span></span>
<span>          <span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span></span>
<span>              <span class="st">"Some biomarker/lab values are already log2 transformed or represent a change value. These are excluded from</span></span>
<span><span class="st">              log2 transform applied to biomarkers/labs at large."</span>,</span>
<span>              <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span></span>
<span>                <span class="co"># call shiny tagList</span></span>
<span>                <span class="fu">shiny</span><span class="fu">::</span><span class="va"><a href="https://rstudio.github.io/htmltools/reference/tagList.html" class="external-link">tagList</a></span>,</span>
<span>                <span class="co"># with a list of shiny::p elements (one for each element) by mapping a</span></span>
<span>                <span class="co"># '&lt;p&gt; builder' function over a list of values</span></span>
<span>                <span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Map</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">paramexcld_list</span>, <span class="va">paramcdexcld_list</span><span class="op">)</span> <span class="op">{</span></span>
<span>                  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu">shiny</span><span class="fu">::</span><span class="va"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">tags</a></span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">paramexcld_list</span>, <span class="st">" ,"</span><span class="op">)</span>, <span class="va">paramcdexcld_list</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>                <span class="op">}</span>, paramcdexcld_list <span class="op">=</span> <span class="va">paramcdexcld_list</span>, paramexcld_list <span class="op">=</span> <span class="va">paramexcld_list</span><span class="op">)</span></span>
<span>              <span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">br</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"Biomarkers/labs having a value of 0 are log2 transformed by taking log2 of the minimum non-zero value for</span></span>
<span><span class="st">                that biomarker/lab, divided by 2."</span><span class="op">)</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h5</a></span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Visualization Tab: Right Hand Data Filter Panel:"</span><span class="op">)</span></span>
<span>          <span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span></span>
<span>              <span class="st">"These filters are not hierarchical so should not be used to filter on analysis variables. To filter on</span></span>
<span><span class="st">                analysis variables please use the filtering controls available in the left hand panel."</span>,</span>
<span>              style <span class="op">=</span> <span class="op">(</span><span class="st">"color: #ff5700;"</span><span class="op">)</span></span>
<span>            <span class="op">)</span>,</span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span></span>
<span>              <span class="st">"Use right hand data panel filters to filter on categorical variables."</span></span>
<span>            <span class="op">)</span>,</span>
<span>            <span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span><span class="st">"AVISIT to exclude/include specific visits in visualizations."</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span><span class="st">"LOQFL to exclude/include LOQ flagged values."</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span><span class="st">"SEX to exclude/include specific gender."</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span><span class="st">"Etc."</span><span class="op">)</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h5</a></span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Visualization Specifics:"</span><span class="op">)</span></span>
<span>          <span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span></span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Box Plot:"</span><span class="op">)</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span><span class="st">"Selecting STUDYID as X-Axis variable will produce the visualization with all subjects combined and identify the study on the X-Axis."</span><span class="op">)</span></span>
<span>          <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span></span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Correlation Plot:"</span><span class="op">)</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span><span class="st">"The data constraint that can be placed on Screening or Baseline records is associated with the analysis</span></span>
<span><span class="st">               variable and Biomarker selected for the X-Axis only."</span><span class="op">)</span>,</span>
<span>          <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span><span class="st">"The Limit of Quantification (LOQFL) flag is set if either of the biomarker/lab values is identified as</span></span>
<span><span class="st">             LOQ. The brushing table column header reflects this as LOQFL_COMB."</span><span class="op">)</span>,</span>
<span>          <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span><span class="st">"The 'Regression Line' option should only be used in conjunction with the 'Treatment Facetting' option.</span></span>
<span><span class="st">                 Otherwise the per treatment regression formula and coefficient annotations will overlay."</span><span class="op">)</span></span>
<span>          <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span></span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Line Plot:"</span><span class="op">)</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span><span class="st">"If an error is displayed related to plot height it's best to first alter the relative plot height in the left panel using the slider. For additional plot height control, use the icons in the upper right corner of the visualization."</span><span class="op">)</span>,</span>
<span>          <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h5</a></span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Copying Content:"</span><span class="op">)</span></span>
<span>          <span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span></span>
<span>              <span class="st">"To copy data from the descriptive summary table, highlight, copy and paste special into Excel using</span></span>
<span><span class="st">              'Unicode Text'."</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span></span>
<span>              <span class="st">"To copy a visualization, right click</span></span>
<span><span class="st">              options."</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">}</span>,</span>
<span>      filters <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal/man/module.html" class="external-link">module</a></span><span class="op">(</span></span>
<span>      <span class="st">"Source Data"</span>,</span>
<span>      server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span>, <span class="va">datasets</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span>,</span>
<span>      ui <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h5</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Molecule:"</span><span class="op">)</span>, <span class="va">MOLECULE</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h5</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Indication:"</span><span class="op">)</span>, <span class="va">INDICATION</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h5</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Study:"</span><span class="op">)</span>, <span class="va">STUDY</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h5</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Analysis Type:"</span><span class="op">)</span>, <span class="va">ATYPE</span><span class="op">)</span>,</span>
<span>          <span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span></span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Subject Level Data Set:"</span><span class="op">)</span>, <span class="va">adsl_source</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Data Set Label:"</span><span class="op">)</span>, <span class="va">sdsl_label</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Data Set Owner:"</span><span class="op">)</span>, <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">a</a></span><span class="op">(</span><span class="va">lead_spa_name</span>,</span>
<span>                href <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"https://en.wikipedia.org/wiki/"</span>, <span class="va">lead_spa_uid</span><span class="op">)</span>,</span>
<span>                title <span class="op">=</span> <span class="st">"Click here for detailed user contact"</span>,</span>
<span>                target <span class="op">=</span> <span class="st">"blank"</span></span>
<span>              <span class="op">)</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Data Set Creation DateTime:"</span><span class="op">)</span>, <span class="va">adsl_time</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Number of  Subjects:"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">sdsl_nsubjs</span><span class="op">)</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Number of Variables:"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span><span class="op">)</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Number of Records:"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">br</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Biomarker Data Set (Identified as ADLB in app):"</span><span class="op">)</span>, <span class="va">adlb_source</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Data Set Label:"</span><span class="op">)</span>, <span class="va">sdlb_label</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Data Set Owner:"</span><span class="op">)</span>, <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">a</a></span><span class="op">(</span><span class="va">lead_spa_name</span>,</span>
<span>                href <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"https://en.wikipedia.org/wiki/"</span>, <span class="va">lead_spa_uid</span><span class="op">)</span>,</span>
<span>                title <span class="op">=</span> <span class="st">"Click here for detailed user contact"</span>,</span>
<span>                target <span class="op">=</span> <span class="st">"blank"</span></span>
<span>              <span class="op">)</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Data Set Creation DateTime:"</span><span class="op">)</span>, <span class="va">adlb_time</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Number of  Subjects:"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">sdlb_nsubjs</span><span class="op">)</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Number of Variables Kept for Visualizations:"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADLB</span><span class="op">)</span><span class="op">)</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Number of Records for Biomarkers of Interest:"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ADLB</span><span class="op">)</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Number of Biomarkers of Interest:"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">ADLB</span><span class="op">$</span><span class="va">PARAMCD</span><span class="op">)</span><span class="op">)</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">br</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"Biomarkers of interest (label, code):"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span></span>
<span>                <span class="co"># call shiny tagList</span></span>
<span>                <span class="fu">shiny</span><span class="fu">::</span><span class="va"><a href="https://rstudio.github.io/htmltools/reference/tagList.html" class="external-link">tagList</a></span>,</span>
<span>                <span class="co"># with a list of shiny::p elements (one for each letter) by mapping a</span></span>
<span>                <span class="co"># '&lt;p&gt; builder' function over a list of values</span></span>
<span>                <span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Map</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">param_list</span>, <span class="va">paramcd_list</span><span class="op">)</span> <span class="op">{</span></span>
<span>                  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="fu">shiny</span><span class="fu">::</span><span class="va"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">tags</a></span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h6</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">param_list</span>, <span class="st">" ,"</span><span class="op">)</span>, <span class="va">paramcd_list</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>                <span class="op">}</span>, paramcd_list <span class="op">=</span> <span class="va">paramcd_list</span>, param_list <span class="op">=</span> <span class="va">param_list</span><span class="op">)</span></span>
<span>              <span class="op">)</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">}</span>,</span>
<span>      filters <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_variable_browser.html" class="external-link">tm_variable_browser</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"View Variables"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_data_table.html" class="external-link">tm_data_table</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"View Data"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_summary.html" class="external-link">tm_t_summary</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Demographics"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>      arm_var <span class="op">=</span> <span class="va">cs_arm_vars</span>,</span>
<span>      summarize_vars <span class="op">=</span> <span class="va">cs_dm_vars</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal/man/modules.html" class="external-link">modules</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Visualizations"</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.goshawk/man/tm_g_gh_boxplot.html" class="external-link">tm_g_gh_boxplot</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"Box Plot"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>        param_var <span class="op">=</span> <span class="st">"PARAMCD"</span>,</span>
<span>        param <span class="op">=</span> <span class="va">cs_params</span>,</span>
<span>        facet_var <span class="op">=</span> <span class="va">cs_box_facet_vars</span>,</span>
<span>        xaxis_var <span class="op">=</span> <span class="va">cs_box_xaxis_vars</span>,</span>
<span>        yaxis_var <span class="op">=</span> <span class="va">cs_anl_vars2</span>,</span>
<span>        plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">200</span>, <span class="fl">2000</span><span class="op">)</span>,</span>
<span>        trt_group <span class="op">=</span> <span class="va">cs_arm_vars</span>,</span>
<span>        color_manual <span class="op">=</span> <span class="va">color_manual</span>,</span>
<span>        shape_manual <span class="op">=</span> <span class="va">shape_manual</span>,</span>
<span>        rotate_xlab <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        hline_arb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>        hline_arb_color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grey"</span>, <span class="st">"red"</span><span class="op">)</span>,</span>
<span>        hline_arb_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"default_hori_A"</span>, <span class="st">"default_hori_B"</span><span class="op">)</span>,</span>
<span>        hline_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ANRHI"</span>, <span class="st">"ANRLO"</span>, <span class="st">"ULOQN"</span>, <span class="st">"LLOQN"</span><span class="op">)</span>,</span>
<span>        hline_vars_colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pink"</span>, <span class="st">"brown"</span>, <span class="st">"purple"</span>, <span class="st">"gray"</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.goshawk/man/tm_g_gh_correlationplot.html" class="external-link">tm_g_gh_correlationplot</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"Correlation Plot"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>        param_var <span class="op">=</span> <span class="st">"PARAMCD"</span>,</span>
<span>        xaxis_param <span class="op">=</span> <span class="va">cs_params</span>,</span>
<span>        xaxis_var <span class="op">=</span> <span class="va">cs_anl_vars1_1</span>,</span>
<span>        yaxis_param <span class="op">=</span> <span class="va">cs_params</span>,</span>
<span>        yaxis_var <span class="op">=</span> <span class="va">cs_anl_vars1_2</span>,</span>
<span>        trt_group <span class="op">=</span> <span class="va">cs_arm_vars</span>,</span>
<span>        color_manual <span class="op">=</span> <span class="va">color_manual</span>,</span>
<span>        shape_manual <span class="op">=</span> <span class="va">shape_manual</span>,</span>
<span>        plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">200</span>, <span class="fl">2000</span><span class="op">)</span>,</span>
<span>        facet_ncol <span class="op">=</span> <span class="fl">2</span>,</span>
<span>        trt_facet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>        reg_line <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>        rotate_xlab <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        font_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">8</span>, <span class="fl">20</span><span class="op">)</span>,</span>
<span>        dot_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">12</span><span class="op">)</span>,</span>
<span>        reg_text_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>        hline_arb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>        hline_arb_label <span class="op">=</span> <span class="st">"arb hori label"</span>,</span>
<span>        hline_arb_color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>, <span class="st">"blue"</span><span class="op">)</span>,</span>
<span>        hline_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ANRHI"</span>, <span class="st">"ANRLO"</span>, <span class="st">"ULOQN"</span>, <span class="st">"LLOQN"</span><span class="op">)</span>,</span>
<span>        hline_vars_colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pink"</span>, <span class="st">"brown"</span>, <span class="st">"purple"</span>, <span class="st">"gray"</span><span class="op">)</span>,</span>
<span>        hline_vars_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ANRHI Label"</span>, <span class="st">"ANRLO Label"</span>, <span class="st">"ULOQN Label"</span>, <span class="st">"LLOQN Label"</span><span class="op">)</span>,</span>
<span>        vline_arb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">70</span><span class="op">)</span>,</span>
<span>        vline_arb_label <span class="op">=</span> <span class="st">"arb vert A"</span>,</span>
<span>        vline_arb_color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"green"</span>, <span class="st">"orange"</span><span class="op">)</span>,</span>
<span>        vline_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ANRHI"</span>, <span class="st">"ANRLO"</span>, <span class="st">"ULOQN"</span>, <span class="st">"LLOQN"</span><span class="op">)</span>,</span>
<span>        vline_vars_colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"yellow"</span>, <span class="st">"orange"</span>, <span class="st">"brown"</span>, <span class="st">"gold"</span><span class="op">)</span>,</span>
<span>        vline_vars_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ANRHI Label"</span>, <span class="st">"ANRLO Label"</span>, <span class="st">"ULOQN Label"</span>, <span class="st">"LLOQN Label"</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.goshawk/man/tm_g_gh_density_distribution_plot.html" class="external-link">tm_g_gh_density_distribution_plot</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"Density Distribution Plot"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>        param_var <span class="op">=</span> <span class="st">"PARAMCD"</span>,</span>
<span>        param <span class="op">=</span> <span class="va">cs_params</span>,</span>
<span>        xaxis_var <span class="op">=</span> <span class="va">cs_anl_vars2</span>,</span>
<span>        trt_group <span class="op">=</span> <span class="va">cs_arm_vars</span>,</span>
<span>        color_manual <span class="op">=</span> <span class="va">color_manual</span>,</span>
<span>        color_comb <span class="op">=</span> <span class="va">color_comb</span>,</span>
<span>        rotate_xlab <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">200</span>, <span class="fl">2000</span><span class="op">)</span>,</span>
<span>        font_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">8</span>, <span class="fl">20</span><span class="op">)</span>,</span>
<span>        line_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">12</span><span class="op">)</span>,</span>
<span>        hline_arb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.02</span>, <span class="fl">.05</span><span class="op">)</span>,</span>
<span>        hline_arb_color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>, <span class="st">"black"</span><span class="op">)</span>,</span>
<span>        hline_arb_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Horizontal Line A"</span>, <span class="st">"Horizontal Line B"</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.goshawk/man/tm_g_gh_lineplot.html" class="external-link">tm_g_gh_lineplot</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"Line Plot"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>        param_var <span class="op">=</span> <span class="st">"PARAMCD"</span>,</span>
<span>        param <span class="op">=</span> <span class="va">cs_params</span>,</span>
<span>        shape_choices <span class="op">=</span> <span class="va">cs_line_splits</span>,</span>
<span>        xaxis_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="st">"ADLB"</span>, <span class="st">"AVISITCDN"</span><span class="op">)</span>, <span class="st">"AVISITCDN"</span><span class="op">)</span>,</span>
<span>        yaxis_var <span class="op">=</span> <span class="va">cs_anl_vars2</span>,</span>
<span>        trt_group <span class="op">=</span> <span class="va">cs_arm_vars</span>,</span>
<span>        color_manual <span class="op">=</span> <span class="va">color_manual</span>,</span>
<span>        rotate_xlab <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600</span>, <span class="fl">200</span>, <span class="fl">2000</span><span class="op">)</span>,</span>
<span>        xtick <span class="op">=</span> <span class="va">x_tick_num</span>,</span>
<span>        xlabel <span class="op">=</span> <span class="va">x_tick_label</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.goshawk/man/tm_g_gh_spaghettiplot.html" class="external-link">tm_g_gh_spaghettiplot</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"Spaghetti Plot"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>        idvar <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>        param_var <span class="op">=</span> <span class="st">"PARAMCD"</span>,</span>
<span>        param <span class="op">=</span> <span class="va">cs_params</span>,</span>
<span>        xaxis_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="st">"ADLB"</span>, <span class="st">"AVISITCDN"</span><span class="op">)</span>, <span class="st">"AVISITCDN"</span><span class="op">)</span>,</span>
<span>        yaxis_var <span class="op">=</span> <span class="va">cs_anl_vars2</span>,</span>
<span>        trt_group <span class="op">=</span> <span class="va">cs_arm_vars</span>,</span>
<span>        man_color <span class="op">=</span> <span class="va">color_manual</span>,</span>
<span>        color_comb <span class="op">=</span> <span class="va">color_comb</span>,</span>
<span>        rotate_xlab <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">200</span>, <span class="fl">2000</span><span class="op">)</span>,</span>
<span>        xtick <span class="op">=</span> <span class="va">x_tick_num</span>,</span>
<span>        xlabel <span class="op">=</span> <span class="va">x_tick_label</span>,</span>
<span>        hline_arb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>        hline_arb_color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grey"</span>, <span class="st">"red"</span><span class="op">)</span>,</span>
<span>        hline_arb_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"default A"</span>, <span class="st">"default B"</span><span class="op">)</span>,</span>
<span>        hline_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ANRHI"</span>, <span class="st">"ANRLO"</span>, <span class="st">"ULOQN"</span>, <span class="st">"LLOQN"</span><span class="op">)</span>,</span>
<span>        hline_vars_colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pink"</span>, <span class="st">"brown"</span>, <span class="st">"purple"</span>, <span class="st">"gray"</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  header <span class="op">=</span> <span class="va">tags</span><span class="op">$</span><span class="fu">h1</span><span class="op">(</span><span class="st">"Longitudinal Visualizations: "</span>, <span class="fu"><a href="https://rdrr.io/r/base/trimws.html" class="external-link">trimws</a></span><span class="op">(</span><span class="va">MOLECULE</span><span class="op">)</span>, <span class="st">"-"</span>, <span class="fu"><a href="https://rdrr.io/r/base/trimws.html" class="external-link">trimws</a></span><span class="op">(</span><span class="va">INDICATION</span><span class="op">)</span>, <span class="st">"-"</span>, <span class="fu"><a href="https://rdrr.io/r/base/trimws.html" class="external-link">trimws</a></span><span class="op">(</span><span class="va">STUDY</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  footer <span class="op">=</span> <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/actionButton.html" class="external-link">actionLink</a></span><span class="op">(</span><span class="st">"showAboutModal"</span>, <span class="st">"About,"</span><span class="op">)</span>,</span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">a</span><span class="op">(</span><span class="st">"Issues"</span>, href <span class="op">=</span> <span class="st">"https://github.com/insightsengineering/teal.gallery/issues"</span>, target <span class="op">=</span> <span class="st">"_blank"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"Packages: teal.goshawk, goshawk"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"Authors: NEST Core Dev Team"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"Copyright 2023"</span><span class="op">)</span>,</span>
<span>    class <span class="op">=</span> <span class="st">"text-muted"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add context sensitive help code</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/body.html" class="external-link">body</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">server</span><span class="op">)</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/body.html" class="external-link">body</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">server</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">showAnlVarLegendModal</span>, <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/showModal.html" class="external-link">showModal</a></span><span class="op">(</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/modalDialog.html" class="external-link">modalDialog</a></span><span class="op">(</span></span>
<span>      title <span class="op">=</span> <span class="st">"Analysis Variable Pull Down Menu"</span>,</span>
<span>      <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span></span>
<span>        <span class="st">"These variables will appear in the Visualizations 'Analysis Variable' pull down menu. This legend</span></span>
<span><span class="st">            provides the variable labels to help clarify the short analysis variable names displayed in the pull down</span></span>
<span><span class="st">          menu."</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"BASE2 = Screening Visit Value"</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"BASE2L2 = Log2(BASE2)"</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"CHG2 = Change from Screening"</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"PCHG2 =  % Change from Screening"</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"BASE = Baseline Visit Value"</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"BASEL2 = Log2(BASE)"</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"CHG = Change from Baseline"</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"PCHG =  % Change from Baseline"</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"AVAL = Visit Values"</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"AVALL2 = Log2(AVAL)"</span><span class="op">)</span>,</span>
<span>      easyClose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/body.html" class="external-link">body</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">server</span><span class="op">)</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/body.html" class="external-link">body</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">server</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">showAboutModal</span>, <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/showModal.html" class="external-link">showModal</a></span><span class="op">(</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/modalDialog.html" class="external-link">modalDialog</a></span><span class="op">(</span></span>
<span>      title <span class="op">=</span> <span class="st">"About this shiny app: Longitudinal Visualizations"</span>,</span>
<span>      <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span></span>
<span>        <span class="st">"This shiny app was brought to you by the NEST Team. For more information, please visit:"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>        <span class="va">tags</span><span class="op">$</span><span class="fu">li</span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">a</span><span class="op">(</span></span>
<span>          href <span class="op">=</span> <span class="st">"https://github.com/insightsengineering"</span>, <span class="st">"Insights Engineering"</span>,</span>
<span>          target <span class="op">=</span> <span class="st">"blank"</span></span>
<span>        <span class="op">)</span><span class="op">)</span>,</span>
<span>        <span class="va">tags</span><span class="op">$</span><span class="fu">li</span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">a</span><span class="op">(</span></span>
<span>          href <span class="op">=</span> <span class="st">"https://pharmaverse.org"</span>, <span class="st">"Pharmaverse"</span>,</span>
<span>          target <span class="op">=</span> <span class="st">"blank"</span></span>
<span>        <span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"The app uses R version: "</span>, <span class="va">R.version</span><span class="op">$</span><span class="va">version.string</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"The app uses teal version: "</span>, <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageDescription</a></span><span class="op">(</span>pkg <span class="op">=</span> <span class="st">"teal"</span>, fields <span class="op">=</span> <span class="st">"Version"</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      easyClose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">ui</span>, <span class="va">x</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="patient-profile">patient-profile<a class="anchor" aria-label="anchor" href="#patient-profile"></a>
</h3>
<p>Deployed app: <a href="https://shinyapps.io/NEST/main/patient-profile" class="external-link uri">https://shinyapps.io/NEST/main/patient-profile</a></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/teal.modules.clinical" class="external-link">teal.modules.clinical</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">teal.modules.general</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">scda</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">scda.2022</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/nestcolor/" class="external-link">nestcolor</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>shiny.useragg <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ADSL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adsl</span></span>
<span><span class="va">ADMH</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">admh</span></span>
<span><span class="va">ADAE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adae</span></span>
<span><span class="va">ADCM</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adcm</span></span>
<span><span class="va">ADVS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">advs</span></span>
<span><span class="va">ADLB</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adlb</span></span>
<span></span>
<span><span class="co">## Modify ADCM</span></span>
<span><span class="va">ADCM</span><span class="op">$</span><span class="va">CMINDC</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Indication_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">ADCM</span><span class="op">$</span><span class="va">CMDECOD</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">ADCM</span><span class="op">$</span><span class="va">CMDOSE</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">ADCM</span><span class="op">$</span><span class="va">CMTRT</span> <span class="op">&lt;-</span> <span class="va">ADCM</span><span class="op">$</span><span class="va">CMCAT</span></span>
<span><span class="va">ADCM</span><span class="op">$</span><span class="va">CMDOSU</span> <span class="op">&lt;-</span> <span class="st">"U"</span></span>
<span><span class="va">ADCM</span><span class="op">$</span><span class="va">CMROUTE</span> <span class="op">&lt;-</span> <span class="st">"CMROUTE"</span></span>
<span><span class="va">ADCM</span><span class="op">$</span><span class="va">CMDOSFRQ</span> <span class="op">&lt;-</span> <span class="st">"CMDOSFRQ"</span></span>
<span><span class="va">ADCM</span><span class="op">$</span><span class="va">CMASTDTM</span> <span class="op">&lt;-</span> <span class="va">ADCM</span><span class="op">$</span><span class="va">ASTDTM</span></span>
<span><span class="va">ADCM</span><span class="op">$</span><span class="va">CMAENDTM</span> <span class="op">&lt;-</span> <span class="va">ADCM</span><span class="op">$</span><span class="va">AENDTM</span></span>
<span></span>
<span><span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span></span>
<span>  <span class="va">ADCM</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CMINDC"</span>, <span class="st">"CMTRT"</span>, <span class="st">"ASTDY"</span>, <span class="st">"AENDY"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"Indication"</span>,</span>
<span>  <span class="st">"Reported Name of Drug, Med, or Therapy"</span>,</span>
<span>  <span class="st">"Study Day of Start of Medication"</span>,</span>
<span>  <span class="st">"Study Day of End of Medication"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Modify ADHM</span></span>
<span><span class="va">ADMH</span><span class="op">[[</span><span class="st">"MHDISTAT"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"ONGOING"</span></span>
<span><span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADMH</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MHDISTAT"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Status of Disease"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Define variable inputs</span></span>
<span><span class="va">aeterm_input</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="st">"AETERM"</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AETERM"</span><span class="op">)</span>,</span>
<span>    multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cmtrt_input</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="st">"CMTRT"</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CMTRT"</span><span class="op">)</span>,</span>
<span>    multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cmindc_input</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="st">"CMINDC"</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CMINDC"</span><span class="op">)</span>,</span>
<span>    multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">atirel_input</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="st">"ATIREL"</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ATIREL"</span><span class="op">)</span>,</span>
<span>    multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cmdecod_input</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>  dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="st">"CMDECOD"</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CMDECOD"</span><span class="op">)</span>,</span>
<span>    multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal/man/init.html" class="external-link">init</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_data.html" class="external-link">cdisc_data</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADSL"</span>, <span class="va">ADSL</span>, code <span class="op">=</span> <span class="st">"ADSL &lt;- synthetic_cdisc_data(\"latest\")$adsl"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADAE"</span>, <span class="va">ADAE</span>, code <span class="op">=</span> <span class="st">"ADAE &lt;- synthetic_cdisc_data(\"latest\")$adae"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADMH"</span>, <span class="va">ADMH</span>, code <span class="op">=</span> <span class="st">"ADMH &lt;- synthetic_cdisc_data(\"latest\")$admh</span></span>
<span><span class="st">      ADMH[['MHDISTAT']] &lt;- 'ONGOING'</span></span>
<span><span class="st">      formatters::var_labels(ADMH[c('MHDISTAT')]) &lt;- c('Status of Disease')"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADCM"</span>, <span class="va">ADCM</span>, code <span class="op">=</span> <span class="st">'ADCM &lt;- synthetic_cdisc_data(\"latest\")$adcm</span></span>
<span><span class="st">      ADCM$CMINDC &lt;- paste0("Indication_", as.numeric(ADCM$CMDECOD))</span></span>
<span><span class="st">      ADCM$CMDOSE &lt;- 1</span></span>
<span><span class="st">      ADCM$CMTRT &lt;- ADCM$CMCAT</span></span>
<span><span class="st">      ADCM$CMDOSU &lt;- "U"</span></span>
<span><span class="st">      ADCM$CMROUTE &lt;- "CMROUTE"</span></span>
<span><span class="st">      ADCM$CMDOSFRQ &lt;- "CMDOSFRQ"</span></span>
<span><span class="st">      ADCM$CMASTDTM &lt;- ADCM$ASTDTM</span></span>
<span><span class="st">      ADCM$CMAENDTM &lt;- ADCM$AENDTM</span></span>
<span><span class="st">      formatters::var_labels(</span></span>
<span><span class="st">        ADCM[c("CMINDC", "CMTRT", "ASTDY", "AENDY")]) &lt;- c(</span></span>
<span><span class="st">          "Indication",</span></span>
<span><span class="st">          "Reported Name of Drug, Med, or Therapy",</span></span>
<span><span class="st">          "Study Day of Start of Medication",</span></span>
<span><span class="st">          "Study Day of End of Medication")'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADVS"</span>, <span class="va">ADVS</span>, code <span class="op">=</span> <span class="st">"ADVS &lt;- synthetic_cdisc_data(\"latest\")$advs"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADLB"</span>, <span class="va">ADLB</span>, code <span class="op">=</span> <span class="st">"ADLB &lt;- synthetic_cdisc_data(\"latest\")$adlb"</span><span class="op">)</span>,</span>
<span>    check <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal/man/modules.html" class="external-link">modules</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_front_page.html" class="external-link">tm_front_page</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Study Information"</span>,</span>
<span>      header_text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Info about data source"</span> <span class="op">=</span> <span class="st">"Random data are used that have been created with the 'scda' R package"</span><span class="op">)</span>,</span>
<span>      tables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>`NEST packages used` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Packages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"teal.modules.general"</span>, <span class="st">"teal.modules.clinical"</span>, <span class="st">"scda"</span>, <span class="st">"scda.2022"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_pp_basic_info.html" class="external-link">tm_t_pp_basic_info</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Basic info"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>      patient_col <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>      vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM"</span>, <span class="st">"AGE"</span>, <span class="st">"SEX"</span>, <span class="st">"COUNTRY"</span>, <span class="st">"RACE"</span>, <span class="st">"EOSSTT"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_pp_medical_history.html" class="external-link">tm_t_pp_medical_history</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Medical history"</span>,</span>
<span>      parentname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>      patient_col <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>      mhterm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADMH"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADMH</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MHTERM"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MHTERM"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      mhbodsys <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADMH"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADMH</span>, <span class="st">"MHBODSYS"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MHBODSYS"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      mhdistat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADMH"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADMH</span>, <span class="st">"MHDISTAT"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MHDISTAT"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_pp_prior_medication.html" class="external-link">tm_t_pp_prior_medication</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Prior medication"</span>,</span>
<span>      parentname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>      patient_col <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>      atirel <span class="op">=</span> <span class="va">atirel_input</span>,</span>
<span>      cmdecod <span class="op">=</span> <span class="va">cmdecod_input</span>,</span>
<span>      cmindc <span class="op">=</span> <span class="va">cmindc_input</span>,</span>
<span>      cmstdy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="st">"ASTDY"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ASTDY"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_g_pp_vitals.html" class="external-link">tm_g_pp_vitals</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Vitals"</span>,</span>
<span>      parentname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>      patient_col <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>      plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600L</span>, <span class="fl">200L</span>, <span class="fl">2000L</span><span class="op">)</span>,</span>
<span>      paramcd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADVS"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADVS</span>, <span class="st">"PARAMCD"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PARAMCD"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      xaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADVS"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADVS</span>, <span class="st">"ADY"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ADY"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      aval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADVS"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADVS</span>, <span class="st">"AVAL"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVAL"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_g_pp_therapy.html" class="external-link">tm_g_pp_therapy</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Therapy"</span>,</span>
<span>      parentname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>      patient_col <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>      plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600L</span>, <span class="fl">200L</span>, <span class="fl">2000L</span><span class="op">)</span>,</span>
<span>      atirel <span class="op">=</span> <span class="va">atirel_input</span>,</span>
<span>      cmdecod <span class="op">=</span> <span class="va">cmdecod_input</span>,</span>
<span>      cmindc <span class="op">=</span> <span class="va">cmindc_input</span>,</span>
<span>      cmdose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="st">"CMDOSE"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CMDOSE"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      cmtrt <span class="op">=</span> <span class="va">cmtrt_input</span>,</span>
<span>      cmdosu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="st">"CMDOSU"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CMDOSU"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      cmroute <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="st">"CMROUTE"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CMROUTE"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      cmdosfrq <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="st">"CMDOSFRQ"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CMDOSFRQ"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      cmstdy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="st">"ASTDY"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ASTDY"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      cmendy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="st">"AENDY"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AENDY"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_g_pp_adverse_events.html" class="external-link">tm_g_pp_adverse_events</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Adverse events"</span>,</span>
<span>      parentname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>      patient_col <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>      plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600L</span>, <span class="fl">200L</span>, <span class="fl">2000L</span><span class="op">)</span>,</span>
<span>      aeterm <span class="op">=</span> <span class="va">aeterm_input</span>,</span>
<span>      tox_grade <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="st">"AETOXGR"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AETOXGR"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      causality <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="st">"AEREL"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AEREL"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      outcome <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="st">"AEOUT"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AEOUT"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      action <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="st">"AEACN"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AEACN"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="st">"ASTDY"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ASTDY"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      decod <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_pp_laboratory.html" class="external-link">tm_t_pp_laboratory</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Lab values"</span>,</span>
<span>      parentname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>      patient_col <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>      paramcd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="st">"PARAMCD"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PARAMCD"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      param <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      timepoints <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="st">"ADY"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ADY"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      anrind <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="st">"ANRIND"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ANRIND"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      aval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="st">"AVAL"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVAL"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      avalu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="st">"AVALU"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVALU"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_g_pp_patient_timeline.html" class="external-link">tm_g_pp_patient_timeline</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Patient timeline"</span>,</span>
<span>      parentname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>      patient_col <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>      plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600L</span>, <span class="fl">200L</span>, <span class="fl">2000L</span><span class="op">)</span>,</span>
<span>      font_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15L</span>, <span class="fl">8L</span>, <span class="fl">25L</span><span class="op">)</span>,</span>
<span>      cmdecod <span class="op">=</span> <span class="va">cmdecod_input</span>,</span>
<span>      aeterm <span class="op">=</span> <span class="va">aeterm_input</span>,</span>
<span>      aetime_start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="st">"ASTDTM"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ASTDTM"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      aetime_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="st">"AENDTM"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AENDTM"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      dstime_start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="st">"CMASTDTM"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CMASTDTM"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      dstime_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="st">"CMAENDTM"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CMAENDTM"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      aerelday_start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="st">"ASTDY"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ASTDY"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      aerelday_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="st">"AENDY"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AENDY"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      dsrelday_start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="st">"ASTDY"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ASTDY"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      dsrelday_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="st">"AENDY"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AENDY"</span><span class="op">)</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  header <span class="op">=</span> <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>    class <span class="op">=</span> <span class="st">""</span>,</span>
<span>    style <span class="op">=</span> <span class="st">"margin-bottom: 2px;"</span>,</span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">h1</span><span class="op">(</span><span class="st">"Example Patient Profile App"</span>, <span class="va">tags</span><span class="op">$</span><span class="fu">span</span><span class="op">(</span><span class="st">"SPA"</span>, class <span class="op">=</span> <span class="st">"pull-right"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  footer <span class="op">=</span> <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span>class <span class="op">=</span> <span class="st">"text-muted"</span>, <span class="st">"Source: teal.gallery package"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="python">python<a class="anchor" aria-label="anchor" href="#python"></a>
</h3>
<p>Deployed app: <a href="https://shinyapps.io/NEST/main/python" class="external-link uri">https://shinyapps.io/NEST/main/python</a></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/reticulate/" class="external-link">reticulate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">teal</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">teal.modules.general</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/nestcolor/" class="external-link">nestcolor</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">sparkline</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.r4photobiology.info/ggpmisc/" class="external-link">ggpmisc</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>shiny.useragg <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/use_python.html" class="external-link">use_python</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"RETICULATE_PYTHON"</span>, unset <span class="op">=</span> <span class="st">"/usr/bin/python3"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">iris_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span>, <span class="va">iris</span><span class="op">)</span></span>
<span></span>
<span><span class="va">python_code</span> <span class="op">&lt;-</span> <span class="st">"import pandas as pd</span></span>
<span><span class="st">data = r.data_raw</span></span>
<span><span class="st">def svd_whiten(dat):</span></span>
<span><span class="st">  import numpy as np</span></span>
<span><span class="st">  X = np.matrix(dat)</span></span>
<span><span class="st">  U, s, Vt = np.linalg.svd(X, full_matrices=False)</span></span>
<span><span class="st">  X_white = np.dot(U, Vt)</span></span>
<span><span class="st">  return X_white</span></span>
<span><span class="st">data_columns = data.columns</span></span>
<span><span class="st">global numeric_cols_ix</span></span>
<span><span class="st">global numeric_cols</span></span>
<span><span class="st">numeric_cols_ix = list(range(5))[1:]</span></span>
<span><span class="st">numeric_cols = [x for i,x in enumerate(data_columns) if i in numeric_cols_ix]</span></span>
<span><span class="st">svd_res = svd_whiten(data.iloc[:, numeric_cols_ix])</span></span>
<span><span class="st">data_new = pd.concat([data, pd.DataFrame(svd_res)], axis = 1)</span></span>
<span><span class="st">data_new.columns = list(data_columns) + [i + '.whiten' for i in numeric_cols]</span></span>
<span><span class="st">data_new</span></span>
<span><span class="st">"</span></span>
<span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu">teal</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/teal/man/init.html" class="external-link">init</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/teal_data.html" class="external-link">teal_data</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/python_dataset_connector.html" class="external-link">python_dataset_connector</a></span><span class="op">(</span></span>
<span>    <span class="st">"IRIS"</span>,</span>
<span>    code <span class="op">=</span> <span class="va">python_code</span>,</span>
<span>    object <span class="op">=</span> <span class="st">"data_new"</span>,</span>
<span>    keys <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>    vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>data_raw <span class="op">=</span> <span class="va">iris_raw</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/mutate_data.html" class="external-link">mutate_data</a></span><span class="op">(</span><span class="st">"IRIS$id &lt;- as.integer(IRIS$id)"</span><span class="op">)</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Example teal app using python connector"</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal/man/modules.html" class="external-link">modules</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_data_table.html" class="external-link">tm_data_table</a></span><span class="op">(</span><span class="st">"Data Table"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_variable_browser.html" class="external-link">tm_variable_browser</a></span><span class="op">(</span><span class="st">"Variable Browser"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_g_scatterplot.html" class="external-link">tm_g_scatterplot</a></span><span class="op">(</span></span>
<span>      <span class="st">"Scatterplot"</span>,</span>
<span>      x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"IRIS"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          label <span class="op">=</span> <span class="st">"Select variable:"</span>,</span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="st">"IRIS"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>            <span class="st">"Sepal.Length"</span>, <span class="st">"Sepal.Width"</span>,</span>
<span>            <span class="st">"Petal.Length"</span>, <span class="st">"Petal.Width"</span>,</span>
<span>            <span class="st">"Sepal.Length.whiten"</span>, <span class="st">"Sepal.Width.whiten"</span>,</span>
<span>            <span class="st">"Petal.Length.whiten"</span>, <span class="st">"Petal.Width.whiten"</span></span>
<span>          <span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"Petal.Length.whiten"</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"IRIS"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          label <span class="op">=</span> <span class="st">"Select variable:"</span>,</span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="st">"IRIS"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>            <span class="st">"Sepal.Length"</span>, <span class="st">"Sepal.Width"</span>,</span>
<span>            <span class="st">"Petal.Length"</span>, <span class="st">"Petal.Width"</span>,</span>
<span>            <span class="st">"Sepal.Length.whiten"</span>, <span class="st">"Sepal.Width.whiten"</span>,</span>
<span>            <span class="st">"Petal.Length.whiten"</span>, <span class="st">"Petal.Width.whiten"</span></span>
<span>          <span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"Petal.Width.whiten"</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      color_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/data_extract_spec.html" class="external-link">data_extract_spec</a></span><span class="op">(</span></span>
<span>        dataname <span class="op">=</span> <span class="st">"IRIS"</span>,</span>
<span>        select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/select_spec.html" class="external-link">select_spec</a></span><span class="op">(</span></span>
<span>          label <span class="op">=</span> <span class="st">"Select variable:"</span>,</span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="st">"IRIS"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Species"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"Species"</span>,</span>
<span>          multiple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  header <span class="op">=</span> <span class="st">"Example teal app using python connector"</span>,</span>
<span>  footer <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="rna-seq">RNA-seq<a class="anchor" aria-label="anchor" href="#rna-seq"></a>
</h3>
<p>Deployed app: <a href="https://shinyapps.io/NEST/main/RNA-seq" class="external-link uri">https://shinyapps.io/NEST/main/RNA-seq</a></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/teal.modules.hermes/" class="external-link">teal.modules.hermes</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">teal.modules.general</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">scda.2022</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/nestcolor/" class="external-link">nestcolor</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>shiny.useragg <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># code&gt;</span></span>
<span><span class="va">mae</span> <span class="op">&lt;-</span> <span class="fu">hermes</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/hermes/man/multi_assay_experiment.html" class="external-link">multi_assay_experiment</a></span></span>
<span><span class="va">mae_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/dataset.html" class="external-link">dataset</a></span><span class="op">(</span><span class="st">"MAE"</span>, <span class="va">mae</span><span class="op">)</span></span>
<span></span>
<span><span class="va">adtte</span> <span class="op">&lt;-</span> <span class="fu">scda</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"rcd_2022_06_27"</span><span class="op">)</span><span class="op">$</span><span class="va">adtte</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>is_event <span class="op">=</span> <span class="va">CNSR</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/teal_data.html" class="external-link">teal_data</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/dataset.html" class="external-link">dataset</a></span><span class="op">(</span></span>
<span>    <span class="st">"ADTTE"</span>,</span>
<span>    <span class="va">adtte</span>,</span>
<span>    code <span class="op">=</span> <span class="st">'adtte &lt;- scda::synthetic_cdisc_data("rcd_2022_06_27")$adtte %&gt;%</span></span>
<span><span class="st">      dplyr::mutate(is_event = CNSR == 0)'</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/dataset.html" class="external-link">dataset</a></span><span class="op">(</span><span class="st">"MAE"</span>, <span class="va">mae</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/teal/man/init.html" class="external-link">init</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal/man/modules.html" class="external-link">modules</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_front_page.html" class="external-link">tm_front_page</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"App Info"</span>,</span>
<span>      header_text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Study Information"</span> <span class="op">=</span> <span class="st">"Random data are used that has been created with the 'scda' and 'hermes' R packages."</span><span class="op">)</span>,</span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.hermes/man/tm_g_quality.html" class="external-link">tm_g_quality</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Quality Control"</span>,</span>
<span>      mae_name <span class="op">=</span> <span class="st">"MAE"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.hermes/man/tm_g_pca.html" class="external-link">tm_g_pca</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"PCA plot"</span>,</span>
<span>      mae_name <span class="op">=</span> <span class="st">"MAE"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu">teal.modules.hermes</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/teal.modules.hermes/man/tm_g_scatterplot.html" class="external-link">tm_g_scatterplot</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Scatterplot"</span>,</span>
<span>      mae_name <span class="op">=</span> <span class="st">"MAE"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.hermes/man/tm_g_boxplot.html" class="external-link">tm_g_boxplot</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Boxplot"</span>,</span>
<span>      mae_name <span class="op">=</span> <span class="st">"MAE"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.hermes/man/tm_g_barplot.html" class="external-link">tm_g_barplot</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Barplot"</span>,</span>
<span>      mae_name <span class="op">=</span> <span class="st">"MAE"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.hermes/man/tm_g_volcanoplot.html" class="external-link">tm_g_volcanoplot</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Volcanoplot"</span>,</span>
<span>      mae_name <span class="op">=</span> <span class="st">"MAE"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.hermes/man/tm_g_forest_tte.html" class="external-link">tm_g_forest_tte</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Forestplot"</span>,</span>
<span>      adtte_name <span class="op">=</span> <span class="st">"ADTTE"</span>,</span>
<span>      mae_name <span class="op">=</span> <span class="st">"MAE"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.hermes/man/tm_g_km.html" class="external-link">tm_g_km</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Kaplan-Meier"</span>,</span>
<span>      adtte_name <span class="op">=</span> <span class="st">"ADTTE"</span>,</span>
<span>      mae_name <span class="op">=</span> <span class="st">"MAE"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  header <span class="op">=</span> <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>    class <span class="op">=</span> <span class="st">""</span>,</span>
<span>    style <span class="op">=</span> <span class="st">"margin-bottom: 2px;"</span>,</span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">h1</span><span class="op">(</span></span>
<span>      <span class="st">"Example App with teal.modules.hermes modules"</span>,</span>
<span>      <span class="va">tags</span><span class="op">$</span><span class="fu">span</span><span class="op">(</span><span class="st">"SPA"</span>, class <span class="op">=</span> <span class="st">"pull-right"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  footer <span class="op">=</span> <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span>class <span class="op">=</span> <span class="st">"text-muted"</span>, <span class="st">"Source: teal.gallery package"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">## Not run:</span></span>
<span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="safety">safety<a class="anchor" aria-label="anchor" href="#safety"></a>
</h3>
<p>Deployed app: <a href="https://shinyapps.io/NEST/main/safety" class="external-link uri">https://shinyapps.io/NEST/main/safety</a></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>shiny.useragg <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">scda</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">scda.2022</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">teal.modules.general</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/teal.modules.clinical" class="external-link">teal.modules.clinical</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/nestcolor/" class="external-link">nestcolor</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">sparkline</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># code&gt;</span></span>
<span><span class="co">## Generate Data</span></span>
<span><span class="va">ADSL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adsl</span></span>
<span></span>
<span><span class="co">## Create variable type lists</span></span>
<span><span class="va">date_vars_adsl</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Date"</span>, <span class="st">"POSIXct"</span>, <span class="st">"POSIXlt"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span>, <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">char_vars_adsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Filter</a></span><span class="op">(</span><span class="va">isTRUE</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">is.character</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ADAE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adae</span></span>
<span><span class="va">ADAETTE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adaette</span></span>
<span><span class="va">ADAETTE</span> <span class="op">&lt;-</span> <span class="va">ADAETTE</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>is_event <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"TOT"</span>, <span class="va">.data</span><span class="op">$</span><span class="va">PARAMCD</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">~</span> <span class="cn">TRUE</span>,</span>
<span>    <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">CNSR</span> <span class="op">==</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>n_events <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"TOT"</span>, <span class="va">.data</span><span class="op">$</span><span class="va">PARAMCD</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">AVAL</span><span class="op">)</span>,</span>
<span>    <span class="cn">TRUE</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">is_event</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_relabel.html" class="external-link">var_relabel</a></span><span class="op">(</span>is_event <span class="op">=</span> <span class="st">"Is an Event"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_relabel.html" class="external-link">var_relabel</a></span><span class="op">(</span>n_events <span class="op">=</span> <span class="st">"Number of Events"</span><span class="op">)</span></span>
<span><span class="va">ADAETTE_AE</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ADAETTE</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"TOT"</span>, <span class="va">.data</span><span class="op">$</span><span class="va">PARAMCD</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="st">"AVAL"</span><span class="op">)</span></span>
<span><span class="va">ADAETTE_OTH</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ADAETTE</span>, <span class="op">!</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"TOT"</span>, <span class="va">.data</span><span class="op">$</span><span class="va">PARAMCD</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ADAETTE_TTE</span> <span class="op">&lt;-</span> <span class="va">ADAETTE</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">PARAMCD</span> <span class="op">==</span> <span class="st">"AEREPTTE"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">ARM</span>, <span class="va">ARMCD</span>, <span class="va">AVAL</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ADAETTE_AE</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join</a></span><span class="op">(</span><span class="va">ADAETTE_AE</span>, <span class="va">ADAETTE_TTE</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"ARM"</span>, <span class="st">"ARMCD"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">ADAETTE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">ADAETTE_AE</span>, <span class="va">ADAETTE_OTH</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ADEX</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adex</span></span>
<span><span class="va">ADEX_labels</span> <span class="op">&lt;-</span> <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADEX</span>, fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># Below steps are done to simulate data with TDURD parameter as it is not in the ADEX data from scda package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span>, kind <span class="op">=</span> <span class="st">"Mersenne-Twister"</span><span class="op">)</span></span>
<span><span class="va">ADEX</span> <span class="op">&lt;-</span> <span class="va">ADEX</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">USUBJID</span>, .keep_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    PARAMCD <span class="op">=</span> <span class="st">"TDURD"</span>,</span>
<span>    PARAM <span class="op">=</span> <span class="st">"Overall duration (days)"</span>,</span>
<span>    AVAL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">200</span><span class="op">)</span>,</span>
<span>      size <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>      replace <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span>,</span>
<span>    AVALU <span class="op">=</span> <span class="st">"Days"</span>,</span>
<span>    PARCAT1 <span class="op">=</span> <span class="st">"OVERALL"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">ADEX</span><span class="op">)</span></span>
<span><span class="va">ADEX</span> <span class="op">&lt;-</span> <span class="va">ADEX</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">PARCAT1</span> <span class="op">==</span> <span class="st">"OVERALL"</span> <span class="op">&amp;</span></span>
<span>    <span class="va">PARAMCD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TDOSE"</span>, <span class="st">"TNDOSE"</span>, <span class="st">"TDURD"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">ADEX</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">ADEX_labels</span></span>
<span></span>
<span><span class="va">ADLB</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adlb</span></span>
<span></span>
<span><span class="va">ADEG</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adeg</span></span>
<span></span>
<span><span class="co"># For real data, ADVS needs some preprocessing like group different ANRIND and BNRIND into abnormal</span></span>
<span><span class="va">ADVS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">advs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>ONTRTFL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">AVISIT</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SCREENING"</span>, <span class="st">"BASELINE"</span><span class="op">)</span>, <span class="st">""</span>, <span class="st">"Y"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_relabel.html" class="external-link">var_relabel</a></span><span class="op">(</span>ONTRTFL <span class="op">=</span> <span class="st">"On Treatment Record Flag"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>ANRIND <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">ANRIND</span><span class="op">)</span>, BNRIND <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">BNRIND</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    ANRIND <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">ANRIND</span> <span class="op">==</span> <span class="st">"HIGH HIGH"</span> <span class="op">~</span> <span class="st">"HIGH"</span>,</span>
<span>      <span class="va">ANRIND</span> <span class="op">==</span> <span class="st">"LOW LOW"</span> <span class="op">~</span> <span class="st">"LOW"</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">ANRIND</span></span>
<span>    <span class="op">)</span>,</span>
<span>    BNRIND <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">BNRIND</span> <span class="op">==</span> <span class="st">"HIGH HIGH"</span> <span class="op">~</span> <span class="st">"HIGH"</span>,</span>
<span>      <span class="va">BNRIND</span> <span class="op">==</span> <span class="st">"LOW LOW"</span> <span class="op">~</span> <span class="st">"LOW"</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">BNRIND</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">ADCM</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adcm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>CMSEQ <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">CMSEQ</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add study-specific pre-processing: convert arm, param and visit variables to factors</span></span>
<span><span class="co"># Sample code:</span></span>
<span><span class="co"># ADSL$ACTARM &lt;- factor(ADSL$ACTARM)</span></span>
<span><span class="co"># ADAE$AETOXGR &lt;- factor(ADAE$AETOXGR)</span></span>
<span><span class="co"># ADLB &lt;- ADLB %&gt;%</span></span>
<span><span class="co">#   tern::df_explicit_na(omit_columns = setdiff(names(ADLB), c("PARAM", "PARAMCD", "AVISIT") ))</span></span>
<span><span class="co"># ADEX &lt;- ADEX %&gt;%</span></span>
<span><span class="co">#   tern::df_explicit_na(omit_columns = setdiff(names(ADEX), c("PARAM", "PARAMCD", "PARCAT2") ))</span></span>
<span></span>
<span><span class="co"># define study-specific analysis subgroups and baskets from ADAE</span></span>
<span><span class="va">add_event_flags</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>      TMPFL_SER <span class="op">=</span> <span class="va">AESER</span> <span class="op">==</span> <span class="st">"Y"</span>,</span>
<span>      TMPFL_REL <span class="op">=</span> <span class="va">AEREL</span> <span class="op">==</span> <span class="st">"Y"</span>,</span>
<span>      TMPFL_GR5 <span class="op">=</span> <span class="va">AETOXGR</span> <span class="op">==</span> <span class="st">"5"</span>,</span>
<span>      TMP_SMQ01 <span class="op">=</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">SMQ01NAM</span><span class="op">)</span>,</span>
<span>      TMP_SMQ02 <span class="op">=</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">SMQ02NAM</span><span class="op">)</span>,</span>
<span>      TMP_CQ01 <span class="op">=</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">CQ01NAM</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_relabel.html" class="external-link">var_relabel</a></span><span class="op">(</span></span>
<span>      TMPFL_SER <span class="op">=</span> <span class="st">"Serious AE"</span>,</span>
<span>      TMPFL_REL <span class="op">=</span> <span class="st">"Related AE"</span>,</span>
<span>      TMPFL_GR5 <span class="op">=</span> <span class="st">"Grade 5 AE"</span>,</span>
<span>      TMP_SMQ01 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/tern/man/aesi_label.html" class="external-link">aesi_label</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">SMQ01NAM</span>, <span class="va">dat</span><span class="op">$</span><span class="va">SMQ01SC</span><span class="op">)</span>,</span>
<span>      TMP_SMQ02 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/tern/man/aesi_label.html" class="external-link">aesi_label</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">SMQ02NAM</span>, <span class="va">dat</span><span class="op">$</span><span class="va">SMQ02SC</span><span class="op">)</span>,</span>
<span>      TMP_CQ01 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/tern/man/aesi_label.html" class="external-link">aesi_label</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">CQ01NAM</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">ADAE</span> <span class="op">&lt;-</span> <span class="va">ADAE</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">add_event_flags</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># &lt;code</span></span>
<span></span>
<span><span class="co">## Reusable Configuration For Modules</span></span>
<span><span class="va">arm_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ACTARMCD"</span>, <span class="st">"ACTARM"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">demog_vars_adsl</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span><span class="op">[</span><span class="op">!</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADSL</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span>, <span class="va">date_vars_adsl</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">cs_arm_var</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, subset <span class="op">=</span> <span class="va">arm_vars</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="st">"ACTARM"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">ae_anl_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADAE</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/startsWith.html" class="external-link">startsWith</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADAE</span><span class="op">)</span>, <span class="st">"TMPFL_"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co"># flag variables for AE baskets; set to NULL if not applicable to study</span></span>
<span><span class="va">aesi_vars</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADAE</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/startsWith.html" class="external-link">startsWith</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADAE</span><span class="op">)</span>, <span class="st">"TMP_SMQ"</span><span class="op">)</span> <span class="op">|</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/startsWith.html" class="external-link">startsWith</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADAE</span><span class="op">)</span>, <span class="st">"TMP_CQ"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co">## Define code needed to produce the required data sets</span></span>
<span><span class="va">ADAE_code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>  <span class="st">'ADAE &lt;- synthetic_cdisc_data("latest")$adae'</span>,</span>
<span>  <span class="st">"add_event_flags &lt;- function(dat) {"</span>,</span>
<span>  <span class="st">"  dat %&gt;%"</span>,</span>
<span>  <span class="st">"    dplyr::mutate("</span>,</span>
<span>  <span class="st">'      TMPFL_SER = AESER == "Y",'</span>,</span>
<span>  <span class="st">'      TMPFL_REL = AEREL == "Y",'</span>,</span>
<span>  <span class="st">'      TMPFL_GR5 = AETOXGR == "5",'</span>,</span>
<span>  <span class="st">"      TMP_SMQ01 = !is.na(SMQ01NAM),"</span>,</span>
<span>  <span class="st">"      TMP_SMQ02 = !is.na(SMQ02NAM),"</span>,</span>
<span>  <span class="st">"      TMP_CQ01 = !is.na(CQ01NAM)"</span>,</span>
<span>  <span class="st">"    ) %&gt;%"</span>,</span>
<span>  <span class="st">"    formatters::var_relabel("</span>,</span>
<span>  <span class="st">'      TMPFL_SER = "Serious AE",'</span>,</span>
<span>  <span class="st">'      TMPFL_REL = "Related AE",'</span>,</span>
<span>  <span class="st">'      TMPFL_GR5 = "Grade 5 AE",'</span>,</span>
<span>  <span class="st">"      TMP_SMQ01 = aesi_label(dat$SMQ01NAM, dat$SMQ01SC),"</span>,</span>
<span>  <span class="st">"      TMP_SMQ02 = aesi_label(dat$SMQ02NAM, dat$SMQ02SC),"</span>,</span>
<span>  <span class="st">"      TMP_CQ01 = aesi_label(dat$CQ01NAM)"</span>,</span>
<span>  <span class="st">"    )"</span>,</span>
<span>  <span class="st">"}"</span>,</span>
<span>  <span class="st">"ADAE &lt;- ADAE %&gt;%"</span>,</span>
<span>  <span class="st">"  add_event_flags()"</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">"\n"</span>,</span>
<span>  collapse <span class="op">=</span> <span class="st">"\n"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">ADAETTE_code</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>    <span class="st">'ADAETTE &lt;- synthetic_cdisc_data("latest")$adaette'</span>,</span>
<span>    <span class="st">"ADAETTE &lt;- ADAETTE %&gt;%"</span>,</span>
<span>    <span class="st">"  mutate(is_event = case_when("</span>,</span>
<span>    <span class="st">'    grepl("TOT", .data$PARAMCD, fixed = TRUE) ~ TRUE,'</span>,</span>
<span>    <span class="st">"    TRUE ~ CNSR == 0"</span>,</span>
<span>    <span class="st">"  )) %&gt;%"</span>,</span>
<span>    <span class="st">"  mutate(n_events = case_when("</span>,</span>
<span>    <span class="st">'    grepl("TOT", .data$PARAMCD, fixed = TRUE) ~ as.integer(.data$AVAL),'</span>,</span>
<span>    <span class="st">"    TRUE ~ as.integer(is_event)"</span>,</span>
<span>    <span class="st">"  )) %&gt;%"</span>,</span>
<span>    <span class="st">'  formatters::var_relabel(is_event = "Is an Event") %&gt;%'</span>,</span>
<span>    <span class="st">'  formatters::var_relabel(n_events = "Number of Events")'</span>,</span>
<span>    <span class="st">"ADAETTE_AE &lt;-"</span>,</span>
<span>    <span class="st">'  filter(ADAETTE, grepl("TOT", .data$PARAMCD, fixed = TRUE)) %&gt;% select(-"AVAL")'</span>,</span>
<span>    <span class="st">"ADAETTE_OTH &lt;-"</span>,</span>
<span>    <span class="st">'  filter(ADAETTE, !(grepl("TOT", .data$PARAMCD, fixed = TRUE)))'</span>,</span>
<span>    <span class="st">""</span>,</span>
<span>    <span class="st">"ADAETTE_TTE &lt;- ADAETTE %&gt;%"</span>,</span>
<span>    <span class="st">'  filter(PARAMCD == "AEREPTTE") %&gt;%'</span>,</span>
<span>    <span class="st">"  select(USUBJID, ARM, ARMCD, AVAL)"</span>,</span>
<span>    <span class="st">""</span>,</span>
<span>    <span class="st">"ADAETTE_AE &lt;-"</span>,</span>
<span>    <span class="st">'  full_join(ADAETTE_AE, ADAETTE_TTE, by = c("USUBJID", "ARM", "ARMCD"))'</span>,</span>
<span>    <span class="st">"ADAETTE &lt;- rbind(ADAETTE_AE, ADAETTE_OTH)"</span>,</span>
<span>    sep <span class="op">=</span> <span class="st">"\n"</span>,</span>
<span>    collapse <span class="op">=</span> <span class="st">"\n"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">ADEX_code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>  <span class="st">'ADEX &lt;- synthetic_cdisc_data("latest")$adex'</span>,</span>
<span>  <span class="st">"ADEX_labels &lt;- formatters::var_labels(ADEX, fill = FALSE)"</span>,</span>
<span>  <span class="st">'set.seed(1, kind = "Mersenne-Twister")'</span>,</span>
<span>  <span class="st">"ADEX &lt;- ADEX %&gt;%"</span>,</span>
<span>  <span class="st">"  distinct(USUBJID, .keep_all = TRUE) %&gt;%"</span>,</span>
<span>  <span class="st">"  mutate("</span>,</span>
<span>  <span class="st">'    PARAMCD = "TDURD",'</span>,</span>
<span>  <span class="st">'    PARAM = "Overall duration (days)",'</span>,</span>
<span>  <span class="st">"    AVAL = sample("</span>,</span>
<span>  <span class="st">"      x = seq(1, 200),"</span>,</span>
<span>  <span class="st">"      size = n(),"</span>,</span>
<span>  <span class="st">"      replace = TRUE"</span>,</span>
<span>  <span class="st">"    ),"</span>,</span>
<span>  <span class="st">'    AVALU = "Days",'</span>,</span>
<span>  <span class="st">'    PARCAT1 = "OVERALL"'</span>,</span>
<span>  <span class="st">"  ) %&gt;%"</span>,</span>
<span>  <span class="st">"  bind_rows(ADEX)"</span>,</span>
<span>  <span class="st">"ADEX &lt;- ADEX %&gt;%"</span>,</span>
<span>  <span class="st">'  filter(PARCAT1 == "OVERALL" &amp;'</span>,</span>
<span>  <span class="st">'    PARAMCD %in% c("TDOSE", "TNDOSE", "TDURD"))'</span>,</span>
<span>  <span class="st">"formatters::var_labels(ADEX) &lt;- ADEX_labels"</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">"\n"</span>,</span>
<span>  collapse <span class="op">=</span> <span class="st">"\n"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">ADVS_code</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>    <span class="st">'ADVS &lt;- synthetic_cdisc_data("latest")$advs %&gt;%'</span>,</span>
<span>    <span class="st">'  mutate(ONTRTFL = ifelse(AVISIT %in% c("SCREENING", "BASELINE"), "", "Y")) %&gt;%'</span>,</span>
<span>    <span class="st">'  formatters::var_relabel(ONTRTFL = "On Treatment Record Flag") %&gt;%'</span>,</span>
<span>    <span class="st">"  mutate(ANRIND = as.character(ANRIND), BNRIND = as.character(BNRIND)) %&gt;%"</span>,</span>
<span>    <span class="st">"  mutate("</span>,</span>
<span>    <span class="st">"    ANRIND = case_when("</span>,</span>
<span>    <span class="st">'      ANRIND == "HIGH HIGH" ~ "HIGH",'</span>,</span>
<span>    <span class="st">'      ANRIND == "LOW LOW" ~ "LOW",'</span>,</span>
<span>    <span class="st">"      TRUE ~ ANRIND"</span>,</span>
<span>    <span class="st">"    ),"</span>,</span>
<span>    <span class="st">"    BNRIND = case_when("</span>,</span>
<span>    <span class="st">'      BNRIND == "HIGH HIGH" ~ "HIGH",'</span>,</span>
<span>    <span class="st">'      BNRIND == "LOW LOW" ~ "LOW",'</span>,</span>
<span>    <span class="st">"      TRUE ~ BNRIND"</span>,</span>
<span>    <span class="st">"    )"</span>,</span>
<span>    <span class="st">"  )"</span>,</span>
<span>    sep <span class="op">=</span> <span class="st">"\n"</span>,</span>
<span>    collapse <span class="op">=</span> <span class="st">"\n"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co">## Setup App</span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu">teal</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/teal/man/init.html" class="external-link">init</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_data.html" class="external-link">cdisc_data</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span></span>
<span>      <span class="st">"ADSL"</span>,</span>
<span>      <span class="va">ADSL</span>,</span>
<span>      code <span class="op">=</span> <span class="st">'ADSL &lt;- synthetic_cdisc_data("latest")$adsl'</span>,</span>
<span>      vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>char_vars_adsl <span class="op">=</span> <span class="va">char_vars_adsl</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADAE"</span>, <span class="va">ADAE</span>, code <span class="op">=</span> <span class="va">ADAE_code</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADAETTE"</span>, <span class="va">ADAETTE</span>, code <span class="op">=</span> <span class="va">ADAETTE_code</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADEX"</span>, <span class="va">ADEX</span>, code <span class="op">=</span> <span class="va">ADEX_code</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADLB"</span>, <span class="va">ADLB</span>, code <span class="op">=</span> <span class="st">"ADLB &lt;- synthetic_cdisc_data(\"latest\")$adlb"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADEG"</span>, <span class="va">ADEG</span>, code <span class="op">=</span> <span class="st">"ADEG &lt;- synthetic_cdisc_data(\"latest\")$adeg"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADVS"</span>, <span class="va">ADVS</span>, code <span class="op">=</span> <span class="va">ADVS_code</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.data/man/cdisc_dataset.html" class="external-link">cdisc_dataset</a></span><span class="op">(</span><span class="st">"ADCM"</span>, <span class="va">ADCM</span>, code <span class="op">=</span> <span class="st">'ADCM &lt;- synthetic_cdisc_data("latest")$adcm %&gt;% mutate(CMSEQ = as.integer(CMSEQ))'</span><span class="op">)</span>,</span>
<span>    <span class="co"># code = get_code("app.R")),</span></span>
<span>    check <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal/man/modules.html" class="external-link">modules</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_front_page.html" class="external-link">tm_front_page</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Study Information"</span>,</span>
<span>      header_text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Info about data source"</span> <span class="op">=</span> <span class="st">"Random data are used that have been created with the 'scda' R package"</span><span class="op">)</span>,</span>
<span>      tables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>`NEST packages used` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>        Packages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>          <span class="st">"teal.modules.general"</span>,</span>
<span>          <span class="st">"teal.modules.clinical"</span>,</span>
<span>          <span class="st">"scda"</span>,</span>
<span>          <span class="st">"scda.2022"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_data_table.html" class="external-link">tm_data_table</a></span><span class="op">(</span><span class="st">"Data Table"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.general/man/tm_variable_browser.html" class="external-link">tm_variable_browser</a></span><span class="op">(</span><span class="st">"Variable Browser"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_summary.html" class="external-link">tm_t_summary</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Demographic Table"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span>      arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>      summarize_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, <span class="va">demog_vars_adsl</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEX"</span>, <span class="st">"AGE"</span>, <span class="st">"RACE"</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal/man/modules.html" class="external-link">modules</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Adverse Events"</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_events_summary.html" class="external-link">tm_t_events_summary</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"AE Summary"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>        arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>        flag_var_anl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="st">"ADAE"</span>, <span class="va">ae_anl_vars</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="va">ae_anl_vars</span>,</span>
<span>          keep_order <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span>,</span>
<span>        flag_var_aesi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="st">"ADAE"</span>, <span class="va">aesi_vars</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="va">aesi_vars</span>,</span>
<span>          keep_order <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span>,</span>
<span>        add_total <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_events.html" class="external-link">tm_t_events</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"AE by Term"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>        arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>        llt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AETERM"</span>, <span class="st">"AEDECOD"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AEDECOD"</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        hlt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AEBODSYS"</span>, <span class="st">"AESOC"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"AEBODSYS"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        add_total <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        event_type <span class="op">=</span> <span class="st">"adverse event"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_events_by_grade.html" class="external-link">tm_t_events_by_grade</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"AE Table by Grade"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>        arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>        llt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AEDECOD"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AEDECOD"</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        hlt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AEBODSYS"</span>, <span class="st">"AESOC"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"AEBODSYS"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        grade <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AETOXGR"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"AETOXGR"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        add_total <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_events_patyear.html" class="external-link">tm_t_events_patyear</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"AE Rates Adjusted for Patient-Years at Risk"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAETTE"</span>,</span>
<span>        arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>        paramcd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADAETTE</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"AETTE1"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        events_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAETTE</span>, <span class="st">"n_events"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"n_events"</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_smq.html" class="external-link">tm_t_smq</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"Adverse Events by SMQ Table"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADAE"</span>,</span>
<span>        arm_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">arm_vars</span>, <span class="st">"SEX"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"ACTARM"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        add_total <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>        baskets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^(SMQ|CQ).*NAM$"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADAE</span><span class="op">)</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^(SMQ|CQ).*NAM$"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADAE</span><span class="op">)</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        scopes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^SMQ.*SC$"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADAE</span><span class="op">)</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^SMQ.*SC$"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ADAE</span><span class="op">)</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span>,</span>
<span>        llt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADAE</span>, subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AEDECOD"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"AEDECOD"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal/man/modules.html" class="external-link">modules</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Lab Tables"</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_summary_by.html" class="external-link">tm_t_summary_by</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"Labs Summary"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>        arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>        by_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PARAM"</span>, <span class="st">"AVISIT"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PARAM"</span>, <span class="st">"AVISIT"</span><span class="op">)</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span>,</span>
<span>        summarize_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVAL"</span>, <span class="st">"CHG"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVAL"</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        paramcd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"ALT"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_shift_by_grade.html" class="external-link">tm_t_shift_by_grade</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"Grade Laboratory Abnormality Table"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>        arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>        paramcd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"ALT"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        worst_flag_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>            <span class="st">"WGRLOVFL"</span>, <span class="st">"WGRLOFL"</span>, <span class="st">"WGRHIVFL"</span>, <span class="st">"WGRHIFL"</span></span>
<span>          <span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"WGRLOVFL"</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        worst_flag_indicator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="st">"WGRLOVFL"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"Y"</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span>,</span>
<span>        anl_toxgrade_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ATOXGR"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ATOXGR"</span><span class="op">)</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span>,</span>
<span>        base_toxgrade_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BTOXGR"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BTOXGR"</span><span class="op">)</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span>,</span>
<span>        add_total <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_abnormality_by_worst_grade.html" class="external-link">tm_t_abnormality_by_worst_grade</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"Laboratory test results with highest grade post-baseline"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>        arm_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM"</span>, <span class="st">"ARMCD"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"ARM"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        paramcd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ALT"</span>, <span class="st">"CRP"</span>, <span class="st">"IGA"</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        add_total <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal/man/modules.html" class="external-link">modules</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Exposure"</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_summary_by.html" class="external-link">tm_t_summary_by</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"Exposure Summary"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADEX"</span>,</span>
<span>        arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>        by_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADEX</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PARCAT2"</span>, <span class="st">"PARAM"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PARCAT2"</span>, <span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span>,</span>
<span>        summarize_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADEX</span>, <span class="st">"AVAL"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVAL"</span><span class="op">)</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span>,</span>
<span>        paramcd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADEX</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"TDOSE"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        denominator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n"</span>, <span class="st">"N"</span>, <span class="st">"omit"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"n"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_exposure.html" class="external-link">tm_t_exposure</a></span><span class="op">(</span></span>
<span>        label <span class="op">=</span> <span class="st">"Duration of Exposure Table"</span>,</span>
<span>        dataname <span class="op">=</span> <span class="st">"ADEX"</span>,</span>
<span>        paramcd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADEX</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"TDURD"</span>,</span>
<span>          fixed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span>,</span>
<span>        col_by_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADEX</span>, subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">arm_vars</span>, <span class="st">"SEX"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"SEX"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        row_by_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span></span>
<span>            <span class="va">ADEX</span>,</span>
<span>            subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RACE"</span>, <span class="st">"REGION1"</span>, <span class="st">"STRATA1"</span>, <span class="st">"SEX"</span><span class="op">)</span></span>
<span>          <span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"RACE"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        parcat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADEX</span>, <span class="st">"PARCAT2"</span><span class="op">)</span>,</span>
<span>          selected <span class="op">=</span> <span class="st">"Drug A"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        add_total <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_abnormality.html" class="external-link">tm_t_abnormality</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Vital Signs Abnormality"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADVS"</span>,</span>
<span>      arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>      id_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADSL</span>, subset <span class="op">=</span> <span class="st">"USUBJID"</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>        fixed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>      <span class="op">)</span>,</span>
<span>      by_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADVS</span>, subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PARAM"</span>, <span class="st">"AVISIT"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>        keep_order <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>      <span class="op">)</span>,</span>
<span>      grade <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADVS</span>, subset <span class="op">=</span> <span class="st">"ANRIND"</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"ANRIND"</span>,</span>
<span>        fixed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>      <span class="op">)</span>,</span>
<span>      abnormal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>low <span class="op">=</span> <span class="st">"LOW"</span>, high <span class="op">=</span> <span class="st">"HIGH"</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_mult_events.html" class="external-link">tm_t_mult_events</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Concomitant Medication"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADCM"</span>,</span>
<span>      arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>      seq_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="st">"CMSEQ"</span>, selected <span class="op">=</span> <span class="st">"CMSEQ"</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>      hlt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>          <span class="st">"ATC1"</span>, <span class="st">"ATC2"</span>, <span class="st">"ATC3"</span>, <span class="st">"ATC4"</span></span>
<span>        <span class="op">)</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"ATC2"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      llt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADCM</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CMDECOD"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"CMDECOD"</span>,</span>
<span>        fixed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>      <span class="op">)</span>,</span>
<span>      add_total <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>      event_type <span class="op">=</span> <span class="st">"treatment"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_t_shift_by_arm.html" class="external-link">tm_t_shift_by_arm</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"ECG Shift Table by Arm"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADEG"</span>,</span>
<span>      arm_var <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>      paramcd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADEG</span>, <span class="st">"PARAMCD"</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"HR"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      visit_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADEG</span>, <span class="st">"AVISIT"</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"POST-BASELINE MINIMUM"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      aval_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADEG</span>, subset <span class="op">=</span> <span class="st">"ANRIND"</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"ANRIND"</span>,</span>
<span>        fixed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>      <span class="op">)</span>,</span>
<span>      base_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADEG</span>, subset <span class="op">=</span> <span class="st">"BNRIND"</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"BNRIND"</span>,</span>
<span>        fixed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/teal.modules.clinical/man/tm_g_lineplot.html" class="external-link">tm_g_lineplot</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"Line Plot"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>      strata <span class="op">=</span> <span class="va">cs_arm_var</span>,</span>
<span>      x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="st">"AVISIT"</span><span class="op">)</span>, <span class="st">"AVISIT"</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>      y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>        <span class="st">"AVAL"</span>, <span class="st">"BASE"</span>, <span class="st">"CHG"</span>, <span class="st">"PCHG"</span></span>
<span>      <span class="op">)</span><span class="op">)</span>, <span class="st">"AVAL"</span><span class="op">)</span>,</span>
<span>      y_unit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="st">"AVALU"</span><span class="op">)</span>, <span class="st">"AVALU"</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>      paramcd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/variable_choices.html" class="external-link">variable_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="st">"PARAMCD"</span><span class="op">)</span>, <span class="st">"PARAMCD"</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>      param <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/choices_selected.html" class="external-link">choices_selected</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/teal.transform/man/value_choices.html" class="external-link">value_choices</a></span><span class="op">(</span><span class="va">ADLB</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span>, <span class="st">"ALT"</span><span class="op">)</span>,</span>
<span>      plot_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1000L</span>, <span class="fl">200L</span>, <span class="fl">4000L</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  header <span class="op">=</span> <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>    class <span class="op">=</span> <span class="st">""</span>,</span>
<span>    style <span class="op">=</span> <span class="st">"margin-bottom: 2px;"</span>,</span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">h1</span><span class="op">(</span></span>
<span>      <span class="st">"Example Safety App with teal.modules.clinical modules"</span>,</span>
<span>      <span class="va">tags</span><span class="op">$</span><span class="fu">span</span><span class="op">(</span><span class="st">"SPA"</span>, class <span class="op">=</span> <span class="st">"pull-right"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  footer <span class="op">=</span> <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span>class <span class="op">=</span> <span class="st">"text-muted"</span>, <span class="st">"Source: teal.gallery package"</span><span class="op">)</span>,</span>
<span>  <span class="co"># Set initial filter state as safety-evaluable population</span></span>
<span>  filter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    ADSL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>SAFFL <span class="op">=</span> <span class="st">"Y"</span><span class="op">)</span>,</span>
<span>    ADLB <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>AVAL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="co"># default filter</span></span>
<span>    ADEX <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>AVAL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="co"># default filter</span></span>
<span>    ADEG <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>AVAL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="co"># default filter</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="viewing-sources-on-your-workstation">Viewing sources on your workstation<a class="anchor" aria-label="anchor" href="#viewing-sources-on-your-workstation"></a>
</h2>
<p>To view the source code for any of these sample apps on your
workstation, simply:</p>
<ul>
<li>Install the <code>teal.gallery</code> package locally.</li>
<li>Pick an app whose source code you want to view from this list:</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">teal.gallery</span><span class="fu">::</span><span class="fu"><a href="../reference/list_apps.html">list_apps</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "basic-teal"      "early-dev"       "efficacy"        "exploratory"    </span></span>
<span><span class="co">## [5] "longitudinal"    "patient-profile" "python"          "RNA-seq"        </span></span>
<span><span class="co">## [9] "safety"</span></span></code></pre>
<ul>
<li>View the source of the sample by running:</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">teal.gallery</span><span class="fu">::</span><span class="fu"><a href="../reference/get_app_code.html">get_app_code</a></span><span class="op">(</span><span class="st">"&lt;app name&gt;"</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="nest">
  <p>teal.gallery is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer>
</div>

  

  

  </body>
</html>
